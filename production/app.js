var tempo=20,startMeasure=currentMeasure=1,endMeasure=1,startDelay=delay=0,endDelay=4*endMeasure,FAST_FORWARD=0.01,leftHandEnabled=1,rightHandEnabled=1,timers=[],DELAY=0,DURATION=1,NOTE=2,VELOCITY=3,FINGER=4,REPEAT=1,RETAIN_VISUAL=1,feedbackFormDisplayed=0,notePress=21,repeatEnabled=1;
$(document).ready(function(){MIDI.loadPlugin({soundfontUrl:"./soundfont/",instrument:"acoustic_grand_piano",callback:function(){MIDI.setVolume(0,127)}});drawScreen();$("body").css("-webkit-user-select","none");$("body").css("-moz-user-select","none");$("body").css("-ms-user-select","none");$("body").css("-o-user-select","none");$("body").css("user-select","none")});
function didPressPlayButton(a){$("#playBtn").attr("src","./images/pauseButton.png");$("#playBtn").attr("onclick","didPressPauseButton()");a!=REPEAT&&(oldTempo=tempo,tempo=FAST_FORWARD);for(measure=startMeasure;measure<=endMeasure;measure++)for(a=0;a<tune[measure].length;a++){var b=tune[measure][a][NOTE],c=b-21,d="#00FF00",e=tune[measure][a][DELAY],f=e+tune[measure][a][DURATION];f>4*endMeasure&&(f=4*endMeasure-0.01);delay-0.01<=e&&e<delay?(tempo==FAST_FORWARD&&(tempo=oldTempo),e=tune[measure][a][FINGER],
0>e&&!leftHandEnabled||0<e&&!rightHandEnabled||(MIDI.noteOn(0,b,tune[measure][a][VELOCITY],0),0>e&&(d="red",e*=-1),$("#key-"+c).css("background-color",d),$("#keyLabel-"+c).text(e))):delay-0.01<f-0.01&&f-0.01<=delay?resetNote(b):delay-0.01<f&&f<=delay&&MIDI.noteOff(0,b,0)}!repeatEnabled&&delay>=endDelay-0.01?didPressStopButton():timers.push(setTimeout(function(){delay+=0.01;delay>=endDelay&&(delay=startDelay);setPositionMarker();didPressPlayButton(REPEAT)},tempo))}
function didPressPauseButton(){$("#playBtn").attr("src","./images/playButton.png");$("#playBtn").attr("onclick","didPressPlayButton()");resetNotes(RETAIN_VISUAL)}function didPressStopButton(){$("#playBtn").attr("src","./images/playButton.png");$("#playBtn").attr("onclick","didPressPlayButton()");resetNotes();delay=startDelay;setPositionMarker()}
function clearHand(a){for(var b=0;88>b;b++)if(note=b+21,keyColor=$("#key-"+b).css("background-color"),"rgb(0, 255, 0)"==keyColor&&"right"==a||"rgb(255, 0, 0)"==keyColor&&"left"==a)resetNote(note),MIDI.noteOff(0,note,0)}function resetNotes(a){for(var b=21;108>b;b++)MIDI.noteOff(0,b,0),a||resetNote(b);for(a=0;a<timers.length;a++)clearTimeout(timers[a])}
function resetNote(a){key=a-21;color="white";a=key%12;if(1==a||4==a||6==a||9==a||11==a)color="black";$("#key-"+key).css("background-color",color);$("#keyLabel-"+key).text("")}function setCurrentMeasure(a){if("-"==a){if(currentMeasure=Math.floor(delay/4+1),a=currentMeasure-1,0==a)return}else if("+"==a&&(currentMeasure=Math.floor(delay/4+1),a=currentMeasure+1,a==tune.length))return;delay=4*(a-1);a<startMeasure&&setStartMeasure(a);a>endMeasure&&setEndMeasure(a);resetNotes();didPressPlayButton()}
function setStartMeasure(a){if("-"==a){if(currentMeasure=Math.floor(delay/4+1),a=currentMeasure-1,0==a)return}else if("+"==a&&(currentMeasure=Math.floor(delay/4+1),a=currentMeasure+1,a==tune.length))return;startMeasure=Number(a);startDelay=4*(startMeasure-1);startDelay>delay&&(delay=startDelay,setPositionMarker(),resetNotes(),hello=$("#playBtn").attr("src"),"./images/pauseButton.png"==$("#playBtn").attr("src")&&didPressPlayButton());startMeasure>endMeasure&&setEndMeasure(startMeasure);setStartMarker(startMeasure);
colorizeMeasures()}
function setEndMeasure(a){if("-"==a){if(currentMeasure=Math.floor(delay/4+1),a=currentMeasure-1,0==a)return}else if("+"==a&&(currentMeasure=Math.floor(delay/4+1),a=currentMeasure+1,a==tune.length))return;endMeasure=Number(a);endDelay=4*endMeasure;endDelay<=delay&&(delay=startDelay,setPositionMarker(),resetNotes(),"./images/pauseButton.png"==$("#playBtn").attr("src")&&repeatEnabled&&didPressPlayButton());startMeasure>endMeasure&&setStartMeasure(endMeasure);setEndMarker(endMeasure);colorizeMeasures()}
function setTempo(a){tempo=4*(11-a)}debugTop=0;function debug(a){try{a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;")}catch(b){}a='<div id="debug" style="position:absolute;z-index:6;top:'+debugTop+'px;left:10px;color:white;font-size:15px">'+a+"<br></div>";$("#debug").append(a);debugTop+=40}
var tune=[[[]],[[0,3.98958,37,37,-5],[0,3.98958,49,29,-1],[0,0.333333,56,46,1],[0.333333,0.333333,61,30,2],[0.666667,0.333333,64,43,4],[1,0.333333,56,38,1],[1.33333,0.333333,61,29,2],[1.66667,0.333333,64,32,4],[2,0.333333,56,32,1],[2.33333,0.333333,61,25,2],[2.66667,0.333333,64,25,4],[3,0.333333,56,33,1],[3.33333,0.333333,61,29,2],[3.66667,0.333333,64,29,4]],[[4,3.98958,35,42,-5],[4,3.98958,47,38,-1],[4,0.333333,56,25,1],[4.33333,0.34375,61,27,2],[4.65625,0.333333,64,27,4],[5,0.333333,56,30,1],[5.33333,
0.333333,61,29,2],[5.66667,0.333333,64,27,4],[6,0.333333,56,27,1],[6.33333,0.333333,61,25,2],[6.66667,0.333333,64,34,4],[7,0.333333,56,37,1],[7.33333,0.333333,61,31,2],[7.66667,0.333333,64,37,4]],[[8,1.98958,33,37,-5],[8,1.98958,45,39,-1],[8,0.333333,57,41,1],[8.33333,0.333333,61,25,2],[8.66667,0.333333,64,33,4],[9,0.333333,57,28,1],[9.33333,0.333333,61,33,2],[9.66667,0.333333,64,32,4],[10,1.98958,30,27,-5],[10,1.98958,42,29,-1],[10,0.645833,57,36,1],[10.3333,0.333333,62,37,2],[10.6667,0.333333,66,
42,4],[11,0.333333,57,33,1],[11.3333,0.333333,62,31,2],[11.6667,0.333333,66,34,4]],[[12,1.98958,32,37,-5],[12,1.98958,44,31,-1],[12,0.333333,56,44,1],[12.3333,0.333333,60,26,2],[12.6667,0.333333,66,36,5],[13,0.333333,56,44,1],[13.3333,0.333333,61,28,2],[13.6667,0.333333,64,33,4],[14,0.989583,32,39,-5],[14,0.989583,44,32,-1],[14,0.333333,56,37,1],[14.3333,0.333333,61,26,2],[14.6667,0.333333,63,46,3],[15,0.333333,54,39,1],[15.3333,0.333333,60,38,2],[15.6667,0.333333,63,25,4]],[[16,3.98958,37,25,-5],
[16,3.98958,44,33,-2],[16,3.98958,49,23,-1],[16,0.333333,52,36,1],[16.3333,0.333333,56,27,2],[16.6667,0.333333,61,35,4],[17,0.333333,56,36,1],[17.3333,0.333333,61,22,2],[17.6667,0.333333,64,21,4],[18,0.333333,56,42,1],[18.3333,0.333333,61,27,2],[18.6667,0.333333,64,39,4],[19,0.333333,56,46,1],[19,0.75,68,55,5],[19.3333,0.333333,61,28,2],[19.6667,0.333333,64,26,4],[19.75,0.25,68,48,5]],[[20,3.98958,36,40,-5],[20,3.98958,44,32,-2],[20,3.98958,48,28,-1],[20,0.333333,56,43,1],[20,2.98958,68,55,5],[20.3333,
0.333333,63,31,3],[20.6667,0.333333,66,33,4],[21,0.333333,56,32,1],[21.3333,0.333333,63,26,3],[21.6667,0.333333,66,27,4],[22,0.333333,56,27,1],[22.3333,0.333333,63,31,3],[22.6667,0.333333,66,33,4],[23,0.333333,56,32,1],[23,0.75,68,49,5],[23.3333,0.333333,63,32,3],[23.6667,0.333333,66,38,4],[23.75,0.25,68,52,5]],[[24,1.98958,37,37,-5],[24,1.98958,49,34,-1],[24,0.333333,56,54,1],[24,1.98958,68,61,5],[24.3333,0.333333,61,29,2],[24.6667,0.333333,64,30,4],[25,0.333333,56,23,1],[25.3333,0.333333,61,23,
2],[25.6667,0.333333,64,32,4],[26,1.98958,30,33,-5],[26,1.98958,42,28,-1],[26,0.34375,57,38,1],[26,1.98958,69,54,5],[26.3333,0.333333,61,26,2],[26.6667,0.333333,66,32,4],[27,0.333333,57,26,1],[27.3333,0.333333,61,27,2],[27.6667,0.333333,66,33,4]],[[28,1.98958,35,37,-5],[28,1.98958,47,24,-1],[28,0.333333,56,25,1],[28,1.98958,68,51,5],[28.3333,0.333333,59,51,2],[28.6667,0.333333,64,40,4],[29,0.333333,56,25,1],[29.3333,0.333333,59,24,2],[29.6667,0.333333,64,34,4],[29.9896,0.427083,66,53,5],[30,1.98958,
35,25,-5],[30,1.98958,47,24,-1],[30,0.333333,57,38,1],[30.3333,0.333333,59,29,2],[30.6667,0.333333,63,18,4],[30.9167,0.0729167,57,40,1],[31,0.989583,71,48,5],[31.3333,0.333333,59,34,1],[31.6667,0.333333,63,40,2]],[[32,3.98958,40,36,-5],[32,3.98958,52,21,-1],[32,0.333333,56,25,1],[32.3333,0.333333,59,35,2],[32.6667,0.322917,64,25,4],[33,0.333333,56,22,1],[33.3333,0.333333,59,24,2],[33.6667,0.333333,64,30,4],[34,0.333333,56,25,1],[34.3333,0.333333,59,24,2],[34.6667,0.333333,64,36,4],[35,0.333333,56,
27,1],[35.3333,0.333333,59,26,2],[35.6667,0.333333,64,28,4]],[[36,3.98958,40,36,-5],[36,3.98958,52,33,-1],[36,0.333333,55,36,1],[36.3333,0.333333,59,35,2],[36.6667,0.333333,64,30,4],[37,0.333333,55,34,1],[37.3333,0.333333,59,22,2],[37.6667,0.333333,64,27,4],[38,0.333333,55,29,1],[38.3333,0.333333,59,24,2],[38.6667,0.333333,64,25,4],[39,0.333333,55,41,1],[39,0.75,67,58,5],[39.3333,0.333333,59,33,2],[39.6667,0.333333,64,41,4],[39.75,0.25,67,37,5]],[[40,3.98958,38,25,-5],[40,3.98958,50,19,-1],[40,0.333333,
55,26,1],[40,2.98958,67,48,5],[40.3333,0.333333,59,36,2],[40.6667,0.333333,65,41,4],[41,0.333333,55,25,1],[41.3333,0.333333,59,25,2],[41.6667,0.333333,65,30,4],[42,0.333333,55,26,1],[42.3333,0.333333,59,24,2],[42.6667,0.333333,65,34,4],[43,0.333333,55,34,1],[43,0.75,67,55,5],[43.3333,0.333333,59,35,2],[43.6667,0.333333,65,42,4],[43.75,0.25,67,56,5]],[[44,0.989583,36,32,-5],[44,0.989583,48,40,-1],[44,0.333333,55,40,1],[44,2.98958,67,53,5],[44.3333,0.333333,60,37,2],[44.6667,0.333333,64,36,4],[45,0.989583,
35,46,-5],[45,0.989583,47,40,-1],[45,0.333333,55,40,1],[45.3333,0.333333,59,36,2],[45.6667,0.333333,64,29,4],[46,1.98958,34,37,-5],[46,1.98958,46,38,-1],[46,0.333333,55,52,1],[46.3333,0.333333,61,38,2],[46.6667,0.333333,64,36,4],[47,0.333333,54,47,1],[47,0.989583,66,60,5],[47.3333,0.333333,61,43,2],[47.6667,0.333333,64,36,4]],[[48,1.98958,35,34,-5],[48,1.98958,47,40,-1],[48,0.333333,54,32,1],[48,1.98958,66,43,5],[48.3333,0.333333,59,27,2],[48.6667,0.333333,62,25,3],[49,0.333333,54,30,1],[49.3333,
0.333333,59,37,2],[49.6667,0.333333,62,33,3],[50,0.989583,40,43,-3],[50,0.333333,55,48,1],[50,0.989583,67,58,5],[50.3333,0.333333,59,42,2],[50.6667,0.333333,61,47,3],[51,0.333333,43,44,-1],[51,0.989583,52,47,1],[51,0.989583,64,54,5],[51.3333,0.333333,59,43,3],[51.6667,0.333333,61,54,4]],[[52,1.98958,42,34,-1],[52,0.333333,54,39,1],[52,1.98958,66,54,5],[52.3333,0.333333,59,31,2],[52.6667,0.333333,62,37,3],[53,0.989583,54,30,1],[53.3333,0.333333,59,27,2],[53.6667,0.333333,62,37,3],[54,1.98958,30,34,
-5],[54,1.98958,42,34,-1],[54,0.333333,54,31,1],[54,2.01042,66,48,5],[54.3333,0.333333,58,30,2],[54.6667,0.333333,61,37,3],[55,0.333333,54,27,1],[55.3333,0.333333,58,32,2],[55.6667,0.34375,61,30,3]],[[56,4.98958,35,42,-5],[56,4.98958,47,40,-1],[56,0.333333,59,30,1],[56.3333,0.333333,62,24,2],[56.6667,0.333333,66,31,4],[57,0.333333,59,48,1],[57.3333,0.333333,62,39,2],[57.6667,0.333333,66,40,4],[58,0.333333,59,46,1],[58.3333,0.333333,63,49,2],[58.6667,0.333333,66,49,4],[59,0.333333,59,56,1],[59,0.989583,
71,66,5],[59.3333,0.333333,63,34,2],[59.6667,0.333333,66,40,3]],[[60,0.333333,59,82,1],[60.3333,0.333333,64,52,2],[60.6667,0.333333,67,33,3],[61,0.989583,40,52,-5],[61,0.989583,52,53,-1],[61,0.78125,59,42,1],[61.3229,0.333333,64,40,2],[61.6667,0.333333,67,24,3],[62,0.989583,43,77,-5],[62,0.989583,55,81,-1],[62,0.333333,59,57,1],[62.3333,0.333333,64,41,2],[62.6667,0.333333,67,55,3],[63,0.989583,40,34,-5],[63,0.989583,52,51,-1],[63,0.333333,59,47,1],[63,0.989583,70,54,5],[63.3333,0.333333,64,31,2],
[63.6667,0.333333,67,34,3]],[[64,4.33333,35,33,-5],[64,4.33333,47,29,-1],[64,0.333333,59,24,1],[64,2.98958,71,44,5],[64.3333,0.333333,63,32,2],[64.6667,0.333333,66,30,3],[65,0.333333,59,30,1],[65.3333,0.333333,63,25,2],[65.6667,0.333333,66,30,3],[66,0.333333,59,19,1],[66.3333,0.333333,63,34,2],[66.6667,0.333333,66,36,3],[67,0.333333,59,44,1],[67,0.989583,71,62,5],[67.3333,0.395833,63,34,2],[67.6667,0.1875,66,33,3]],[[68,0.333333,59,34,1],[68.3333,0.333333,64,26,2],[68.6667,0.333333,67,28,3],[69,0.989583,
40,48,-5],[69,0.989583,52,46,-1],[69,0.333333,59,37,1],[69.3333,0.333333,64,31,2],[69.6667,0.333333,67,36,3],[70,0.989583,43,68,-5],[70,0.989583,55,74,-1],[70,0.333333,59,62,1],[70.3333,0.333333,64,36,2],[70.6667,0.333333,67,39,3],[71,0.989583,40,34,-5],[71,0.989583,52,47,-1],[71,0.333333,59,47,1],[71,0.989583,70,58,5],[71.3333,0.333333,64,25,2],[71.6667,0.333333,67,22,3]],[[72,1.98958,35,53,-5],[72,1.98958,47,31,-1],[72,0.333333,59,33,1],[72,1.98958,71,47,5],[72.3333,0.333333,63,27,2],[72.6667,0.333333,
66,27,3],[73,0.333333,59,28,1],[73.3333,0.333333,63,31,2],[73.6667,0.333333,66,34,3],[74,1.98958,32,32,-5],[74,1.98958,44,36,-1],[74,0.333333,59,28,1],[74,1.98958,71,41,5],[74.3333,0.333333,62,22,2],[74.6667,0.333333,65,33,3],[75,0.333333,59,29,1],[75.3333,0.333333,62,31,2],[75.6667,0.333333,65,32,3]],[[76,1.98958,29,39,-5],[76,1.98958,41,34,-1],[76,0.333333,59,31,1],[76,1.98958,71,45,5],[76.3333,0.333333,61,29,2],[76.6667,0.333333,68,32,4],[77,0.333333,59,25,1],[77.3333,0.333333,61,29,2],[77.6667,
0.333333,68,25,4],[78,1.98958,30,28,-5],[78,1.98958,42,38,-1],[78,0.333333,57,26,1],[78,1.98958,69,60,5],[78.3333,0.333333,61,25,2],[78.6667,0.333333,66,31,4],[79,0.333333,57,36,1],[79.3333,0.333333,61,23,2],[79.6667,0.333333,66,38,4]],[[80,1.98958,35,38,-5],[80,1.98958,47,51,-1],[80,0.333333,55,48,1],[80,1.98958,67,67,5],[80.3333,0.333333,59,31,2],[80.6667,0.333333,62,42,3],[81,0.333333,55,48,1],[81.3333,0.333333,59,36,2],[81.6667,0.333333,62,58,3],[82,1.98958,36,36,-5],[82,1.98958,48,49,-1],[82,
0.333333,54,37,1],[82,1.98958,66,62,5],[82.3333,0.333333,57,34,2],[82.6667,0.333333,63,55,4],[83,0.333333,54,26,1],[83.3333,0.333333,57,24,2],[83.6667,0.333333,63,37,4]],[[84,1.98958,37,29,-1],[84,0.333333,49,28,1],[84,1.98958,61,32,5],[84.3333,0.333333,54,18,2],[84.6667,0.333333,57,36,3],[85,0.333333,49,34,1],[85.3333,0.333333,54,29,2],[85.6667,0.333333,57,38,3],[86,0.989583,37,37,-1],[86,0.333333,49,25,1],[86,0.989583,61,46,5],[86.3333,0.333333,54,25,2],[86.6667,0.333333,56,30,3],[87,0.333333,37,
29,-1],[87,0.333333,49,23,1],[87,0.989583,61,34,5],[87.3333,0.333333,53,31,2],[87.6667,0.333333,56,40,3]],[[88,3.98958,30,39,-5],[88,3.98958,37,23,-2],[88,3.98958,42,26,-1],[88,0.333333,54,36,1],[88.3333,0.333333,57,25,2],[88.6667,0.333333,61,40,3],[89,0.333333,57,49,1],[89.3333,0.333333,61,27,2],[89.6667,0.333333,66,39,3],[90,0.333333,61,46,1],[90.3333,0.333333,66,28,2],[90.6667,0.333333,69,39,3],[91,0.333333,61,64,1],[91,0.75,73,71,5],[91.3333,0.333333,66,32,2],[91.6667,0.333333,69,29,3],[91.75,
0.25,73,54,5]],[[92,3.98958,41,29,-5],[92,3.98958,49,27,-2],[92,3.98958,53,34,-1],[92,0.34375,61,34,1],[92,1.98958,73,61,5],[92.3333,0.333333,68,35,3],[92.6667,0.333333,71,37,4],[93,0.333333,61,35,1],[93.3333,0.333333,68,26,3],[93.6667,0.333333,71,31,4],[94,0.333333,61,34,1],[94.3333,0.333333,68,32,3],[94.6667,0.333333,71,24,4],[95,0.333333,61,32,1],[95,0.75,73,57,5],[95.3333,0.333333,68,31,3],[95.6667,0.333333,71,34,4],[95.75,0.25,73,46,5]],[[96,1.98958,42,31,-5],[96,1.98958,54,22,-1],[96,0.333333,
61,31,1],[96,1.98958,73,61,5],[96.3333,0.333333,66,34,2],[96.6667,0.333333,69,40,3],[97,0.989583,61,46,1],[97.3333,0.333333,66,32,2],[97.6667,0.333333,69,34,3],[98,0.989583,39,56,-5],[98,0.989583,51,51,-1],[98,0.333333,60,63,1],[98,0.989583,72,68,5],[98.3333,0.333333,66,33,2],[98.6667,0.333333,69,40,3],[99,0.989583,37,50,-5],[99,0.989583,49,62,-1],[99,0.333333,61,69,1],[99,0.989583,73,81,5],[99.3333,0.333333,66,37,2],[99.6667,0.333333,69,37,3]],[[100,2.98958,36,51,-5],[100,2.98958,44,45,-2],[100,
2.98958,48,51,-1],[100,0.333333,63,64,1],[100,2.98958,75,78,5],[100.333,0.333333,66,35,2],[100.667,0.333333,68,36,3],[101,0.333333,63,52,1],[101.333,0.333333,66,25,2],[101.667,0.333333,68,46,3],[102,0.333333,63,43,1],[102.333,0.333333,66,33,2],[102.667,0.333333,68,34,3],[103,0.989583,36,57,-5],[103,0.989583,44,37,-2],[103,0.989583,48,56,-1],[103,0.333333,63,69,1],[103,0.989583,75,71,5],[103.333,0.333333,66,34,2],[103.667,0.333333,68,36,3]],[[104,1.98958,37,28,-5],[104,1.98958,44,46,-2],[104,1.98958,
49,43,-1],[104,0.333333,64,56,1],[104,1.98958,76,71,5],[104.333,0.333333,68,36,2],[104.667,0.333333,73,37,4],[105,0.333333,64,30,1],[105.333,0.333333,68,25,2],[105.667,0.333333,73,32,4],[106,0.989583,30,33,-5],[106,0.989583,42,27,-1],[106,0.333333,63,45,1],[106,0.989583,75,56,5],[106.333,0.333333,66,44,2],[106.667,0.333333,69,46,3],[107,0.989583,31,34,-5],[107,0.989583,43,46,-1],[107,0.333333,61,38,1],[107,0.989583,73,71,5],[107.333,0.333333,64,56,2],[107.667,0.333333,70,51,4]],[[108,3.98958,32,38,
-5],[108,3.98958,44,27,-1],[108,0.989583,72,41,5],[108.333,0.333333,60,24,1],[108.667,0.333333,63,33,2],[109,0.989583,68,58,4],[109.333,0.333333,60,33,1],[109.667,0.333333,63,47,2],[110,0.989583,69,66,4],[110.323,0.333333,60,29,1],[110.667,0.333333,63,31,2],[111,0.989583,66,43,3],[111.323,0.333333,60,29,1],[111.667,0.333333,63,37,2]],[[112,3.98958,32,39,-5],[112,3.98958,44,32,-1],[112.333,0.333333,48,42,1],[112.667,0.333333,51,38,2],[113,0.989583,56,65,4],[113.333,0.333333,48,46,1],[113.667,0.333333,
51,56,2],[114,0.989583,57,74,5],[114.323,0.333333,48,58,1],[114.667,0.333333,51,43,2],[115,0.989583,54,50,3],[115.333,0.333333,48,48,1],[115.667,0.333333,51,35,2]],[[116,3.98958,32,39,-5],[116,3.98958,44,37,-1],[116,0.333333,52,54,1],[116.333,0.333333,64,40,5],[116.656,0.333333,68,27,2],[117,0.989583,73,64,4],[117.333,0.333333,64,31,1],[117.667,0.333333,68,27,2],[118,0.989583,76,70,5],[118.333,0.333333,64,25,1],[118.667,0.333333,68,29,2],[119,0.989583,73,51,4],[119.323,0.333333,64,28,1],[119.667,
0.333333,68,30,2]],[[120,3.98958,32,42,-5],[120,3.98958,44,38,-1],[120.333,0.333333,52,34,1],[120.667,0.333333,56,30,2],[121,0.989583,61,59,4],[121.333,0.333333,52,44,1],[121.667,0.333333,56,58,2],[122,0.989583,64,68,5],[122.333,0.333333,52,37,1],[122.667,0.333333,56,39,2],[123,0.989583,61,47,4],[123.333,0.333333,52,29,1],[123.667,0.333333,56,32,2]],[[124,3.98958,32,29,-5],[124,3.98958,44,25,-1],[124,0.333333,51,45,1],[124.333,0.333333,57,31,3],[124.667,0.333333,54,49,2],[125,0.333333,60,51,5],[125.333,
0.333333,57,44,1],[125.667,0.333333,63,58,3],[126,0.333333,60,57,2],[126.333,0.333333,66,50,5],[126.667,0.333333,63,48,1],[127,0.333333,69,56,3],[127.333,0.333333,66,50,2],[127.667,0.333333,72,57,5]],[[128,3.98958,32,36,-5],[128,3.98958,44,33,-1],[128,0.333333,52,48,1],[128.333,0.333333,61,34,4],[128.667,0.333333,56,40,2],[129,0.333333,64,56,5],[129.333,0.333333,61,39,1],[129.667,0.333333,68,62,3],[130,0.333333,64,46,2],[130.333,0.333333,73,63,5],[130.667,0.333333,68,46,1],[131,0.333333,76,57,4],
[131.333,0.333333,73,26,2],[131.667,0.333333,68,33,1]],[[132,3.98958,32,40,-5],[132,3.98958,44,27,-1],[132,0.333333,61,45,1],[132.333,0.333333,67,52,3],[132.667,0.333333,64,53,2],[133,0.333333,70,56,5],[133.333,0.333333,67,35,1],[133.667,0.333333,73,56,3],[134,0.333333,70,44,2],[134.333,0.333333,76,66,5],[134.667,0.333333,73,42,1],[135,0.333333,79,63,3],[135.333,0.333333,76,40,2],[135.667,0.333333,82,33,5]],[[136,11.9896,32,32,-5],[136,11.9896,44,34,-1],[136,0.333333,66,29,1],[136.333,0.333333,72,
41,3],[136.667,0.333333,69,45,2],[137,0.333333,75,54,5],[137.333,0.333333,72,33,1],[137.667,0.333333,78,48,3],[138,0.333333,75,48,2],[138.333,0.333333,81,43,5],[138.667,0.333333,78,45,1],[139,0.333333,84,68,3],[139.333,0.333333,81,40,2],[139.667,0.333333,87,48,5]],[[140,0.333333,84,57,5],[140.333,0.333333,78,32,2],[140.667,0.333333,81,28,3],[141,0.333333,75,47,1],[141.333,0.333333,78,39,5],[141.667,0.333333,72,36,2],[142,0.333333,75,55,3],[142.333,0.333333,69,34,1],[142.667,0.333333,72,33,5],[143,
0.333333,66,44,2],[143.333,0.333333,69,26,3],[143.667,0.333333,63,31,1]],[[144,0.333333,66,49,5],[144.333,0.333333,60,39,2],[144.667,0.333333,63,25,3],[145,0.333333,57,48,1],[145.333,0.333333,60,33,5],[145.667,0.333333,54,43,2],[146,0.333333,57,30,3],[146.333,0.666667,51,69,1],[146.667,0.333333,54,46,2],[147,0.666667,49,61,1],[147.333,0.333333,54,40,2],[147.667,0.333333,57,35,3]],[[148,3.98958,32,35,-5],[148,3.98958,44,32,-1],[148,1.98958,48,44,1],[148.333,0.333333,54,35,2],[148.667,0.333333,56,44,
3],[149,0.333333,57,62,4],[149.333,0.333333,56,38,3],[149.667,0.333333,54,48,2],[150,0.989583,51,71,1],[150.333,0.333333,54,38,2],[150.667,0.333333,57,40,4],[151,0.989583,49,68,1],[151.333,0.333333,54,36,2],[151.667,0.333333,57,32,4]],[[152,3.98958,32,37,-5],[152,3.98958,44,32,-1],[152,1.98958,48,52,1],[152.333,0.333333,54,34,2],[152.667,0.333333,56,63,3],[153,0.333333,57,82,4],[153.333,0.333333,56,56,3],[153.667,0.333333,54,53,2],[154,0.989583,50,72,1],[154.333,0.333333,54,45,2],[154.667,0.333333,
57,36,4],[155,0.989583,49,64,1],[155.333,0.333333,54,39,2],[155.667,0.333333,57,41,4]],[[156,1.98958,32,39,-5],[156,1.98958,44,31,-1],[156,1.98958,48,57,1],[156.333,0.333333,54,25,2],[156.667,0.333333,56,53,3],[157,0.333333,57,54,4],[157.333,0.333333,56,46,3],[157.667,0.333333,54,50,2],[158,1.98958,33,38,-5],[158,1.98958,45,38,-1],[158,0.989583,49,37,1],[158.333,0.333333,52,24,2],[158.667,0.333333,61,44,5],[159,0.333333,49,32,1],[159.333,0.333333,52,34,2],[159.667,0.333333,61,37,5]],[[160,1.98958,
30,25,-5],[160,1.98958,42,27,-1],[160,0.333333,51,40,1],[160.333,0.333333,57,36,3],[160.667,0.333333,61,43,5],[161,0.333333,51,43,1],[161.323,0.333333,57,28,3],[161.667,0.333333,61,25,5],[162,1.98958,32,33,-5],[162,1.98958,44,33,-1],[162,0.333333,51,45,1],[162.333,0.333333,56,45,3],[162.667,0.333333,60,34,5],[163,0.333333,51,34,1],[163.333,0.333333,54,38,2],[163.667,0.333333,60,33,5]],[[164,3.98958,37,35,-5],[164,3.98958,44,37,-2],[164,3.98958,49,34,-1],[164,0.333333,52,45,1],[164.333,0.333333,56,
27,2],[164.667,0.333333,61,25,4],[165,0.333333,56,45,1],[165.333,0.333333,61,33,2],[165.667,0.333333,64,26,4],[166,0.333333,56,30,1],[166.333,0.333333,61,32,2],[166.667,0.333333,64,27,4],[167,0.333333,56,25,1],[167.333,0.333333,61,29,2],[167.667,0.333333,64,27,4],[167.74,0.0104167,68,60,5]],[[168,3.98958,36,26,-5],[168,3.98958,44,20,-2],[168,3.98958,48,24,-1],[168,0.333333,56,46,1],[168,2.98958,68,58,5],[168.333,0.333333,63,35,3],[168.667,0.333333,66,35,4],[169,0.333333,56,27,1],[169.333,0.333333,
63,23,3],[169.667,0.333333,66,30,4],[170,0.333333,56,25,1],[170.333,0.333333,63,17,3],[170.667,0.333333,66,40,4],[171,0.333333,56,40,1],[171,0.75,68,53,5],[171.333,0.333333,63,32,3],[171.667,0.333333,66,38,4],[171.75,0.25,68,49,5]],[[172,1.98958,37,20,-5],[172,1.98958,49,25,-1],[172,0.333333,56,27,1],[172,1.98958,68,54,5],[172.333,0.333333,61,30,2],[172.667,0.333333,64,37,4],[173,0.333333,56,46,1],[173.333,0.333333,61,26,2],[173.667,0.333333,64,46,4],[174,1.98958,30,35,-5],[174,1.98958,42,30,-1],
[174,0.333333,57,39,1],[174,1.98958,69,59,5],[174.333,0.333333,61,37,2],[174.667,0.333333,66,35,4],[175,0.333333,57,31,1],[175.333,0.333333,61,29,2],[175.667,0.333333,66,33,4]],[[176,1.98958,35,37,-5],[176,1.98958,47,35,-1],[176,0.333333,56,31,1],[176,1.98958,68,54,5],[176.333,0.333333,59,42,2],[176.667,0.333333,64,44,4],[177,0.333333,56,34,1],[177.333,0.333333,59,38,2],[177.667,0.333333,64,38,4],[178,1.98958,35,35,-5],[178,1.98958,47,22,-1],[178,0.333333,57,48,1],[178,0.989583,66,61,5],[178.333,
0.333333,59,32,2],[178.667,0.333333,63,30,4],[178.927,0.40625,57,35,1],[179,0.989583,71,56,5],[179.333,0.333333,59,26,1],[179.667,0.333333,63,50,2]],[[180,3.98958,40,41,-5],[180,3.98958,52,32,-1],[180,0.333333,56,20,0],[180,0.666667,64,40,0],[180.333,0.333333,59,52,0],[180.667,0.333333,64,42,0],[181,0.333333,59,52,0],[181.333,0.333333,64,35,0],[181.667,0.333333,68,35,0],[182,0.333333,59,52,0],[182.333,0.333333,64,32,0],[182.667,0.333333,68,32,0],[183,0.333333,59,53,0],[183,0.75,71,63,0],[183.333,
0.333333,64,34,0],[183.667,0.333333,68,39,0],[183.75,0.25,71,36,0]],[[184,3.98958,39,33,0],[184,3.98958,51,40,0],[184,0.333333,59,40,0],[184,2.98958,71,57,0],[184.333,0.333333,66,27,0],[184.667,0.333333,69,21,0],[185,0.333333,59,42,0],[185.333,0.333333,66,22,0],[185.667,0.333333,69,26,0],[186,0.333333,59,33,0],[186.333,0.333333,66,25,0],[186.667,0.333333,69,32,0],[187,0.333333,59,44,0],[187,0.75,71,68,0],[187.333,0.333333,66,28,0],[187.667,0.333333,69,33,0],[187.75,0.25,71,49,0]],[[188,1.98958,40,
42,0],[188,1.98958,52,36,0],[188,0.333333,59,39,0],[188,1.98958,71,56,0],[188.323,0.333333,64,34,0],[188.667,0.333333,68,36,0],[189,0.333333,59,47,0],[189.323,0.333333,64,40,0],[189.667,0.333333,68,27,0],[190,0.989583,39,58,0],[190,0.989583,51,57,0],[190,0.333333,60,70,0],[190,0.989583,72,75,0],[190.333,0.333333,66,33,0],[190.667,0.333333,68,51,0],[191,0.989583,37,57,0],[191,0.989583,49,65,0],[191,0.34375,61,49,0],[191,0.989583,73,78,0],[191.333,0.333333,64,52,0],[191.667,0.333333,68,55,0]],[[192,
1.98958,36,51,0],[192,1.98958,44,40,0],[192,1.98958,48,60,0],[192,0.333333,63,65,0],[192,1.98958,75,78,0],[192.333,0.333333,66,42,0],[192.667,0.333333,68,42,0],[193,0.333333,63,49,0],[193.333,0.333333,66,39,0],[193.667,0.333333,68,46,0],[194,0.989583,37,38,0],[194,0.989583,44,43,0],[194,0.989583,49,36,0],[194,0.333333,64,59,0],[194,1.98958,76,80,0],[194.333,0.333333,68,34,0],[194.667,0.333333,73,36,0],[195,0.333333,64,36,0],[195.333,0.333333,68,27,0],[195.667,0.333333,73,31,0]],[[196,1.98958,30,34,
0],[196,1.98958,42,17,0],[196,0.333333,62,37,0],[196,1.98958,74,54,0],[196.333,0.333333,66,18,0],[196.667,0.333333,69,19,0],[197,0.333333,62,29,0],[197.333,0.333333,66,36,0],[197.667,0.333333,69,25,0],[198,1.98958,32,26,0],[198,1.98958,44,30,0],[198,0.333333,60,32,0],[198,1.98958,72,49,0],[198.333,0.333333,66,25,0],[198.667,0.333333,68,30,0],[199,0.333333,60,33,0],[199.333,0.333333,66,26,0],[199.667,0.333333,68,34,0]],[[200,4.98958,37,29,0],[200,4.98958,49,25,0],[200,0.333333,61,33,0],[200,2.98958,
73,58,0],[200.333,0.333333,64,28,0],[200.667,0.333333,68,29,0],[201,0.333333,61,28,0],[201.333,0.333333,64,32,0],[201.667,0.333333,68,31,0],[202,0.333333,61,31,0],[202.333,0.333333,65,25,0],[202.667,0.333333,68,34,0],[203,0.333333,61,45,0],[203,0.989583,73,71,0],[203.333,0.333333,65,28,0],[203.667,0.333333,68,43,0],[203.917,0.40625,61,38,0]],[[204,2.98958,74,64,0],[204.333,0.333333,66,39,0],[204.667,0.333333,69,31,0],[205,0.989583,42,49,0],[205,0.989583,54,48,0],[205,0.333333,61,49,0],[205.333,0.333333,
66,42,0],[205.667,0.333333,69,25,0],[206,0.989583,45,79,0],[206,0.989583,57,70,0],[206,0.333333,61,57,0],[206.333,0.333333,66,28,0],[206.667,0.333333,69,41,0],[207,0.989583,42,31,0],[207,0.989583,54,31,0],[207,0.333333,61,44,0],[207,0.989583,72,60,0],[207.333,0.333333,66,29,0],[207.667,0.333333,69,35,0]],[[208,4.98958,37,27,0],[208,4.98958,49,34,0],[208,0.333333,61,33,0],[208,2.98958,73,46,0],[208.333,0.333333,65,27,0],[208.667,0.333333,68,34,0],[209,0.333333,61,30,0],[209.333,0.333333,65,27,0],[209.667,
0.333333,68,35,0],[210,0.333333,61,30,0],[210.333,0.333333,65,26,0],[210.667,0.333333,68,37,0],[211,0.333333,61,49,0],[211,0.989583,73,65,0],[211.333,0.333333,65,34,0],[211.667,0.333333,68,37,0],[211.917,0.40625,61,44,0]],[[212,2.98958,74,88,0],[212.333,0.333333,66,38,0],[212.667,0.333333,69,26,0],[213,0.989583,42,50,0],[213,0.989583,54,44,0],[213,0.333333,61,45,0],[213.333,0.333333,66,23,0],[213.667,0.333333,69,36,0],[214,0.989583,45,72,0],[214,0.989583,57,60,0],[214,0.333333,61,59,0],[214.333,0.333333,
66,35,0],[214.667,0.333333,69,46,0],[215,0.989583,42,39,0],[215,0.989583,54,30,0],[215,0.333333,61,36,0],[215,0.989583,72,58,0],[215.333,0.333333,66,31,0],[215.667,0.333333,69,33,0]],[[216,1.98958,37,35,0],[216,1.98958,49,25,0],[216,0.333333,61,31,0],[216,1.98958,73,46,0],[216.333,0.333333,65,31,0],[216.667,0.333333,68,27,0],[217,0.333333,61,34,0],[217.333,0.333333,65,26,0],[217.667,0.333333,68,37,0],[218,1.98958,30,28,0],[218,1.98958,42,26,0],[218,0.333333,61,18,0],[218,1.98958,73,57,0],[218.333,
0.333333,66,28,0],[218.667,0.333333,69,29,0],[219,0.333333,61,25,0],[219.333,0.333333,66,26,0],[219.667,0.333333,69,27,0]],[[220,2.98958,39,38,0],[220,2.98958,51,29,0],[220,0.333333,59,32,0],[220,2.98958,71,60,0],[220.333,0.333333,66,25,0],[220.667,0.333333,69,24,0],[221,0.333333,59,45,0],[221.333,0.333333,66,22,0],[221.667,0.333333,69,33,0],[222,0.333333,59,32,0],[222.333,0.333333,66,23,0],[222.667,0.333333,69,39,0],[223,0.989583,40,32,0],[223,0.989583,52,24,0],[223,0.333333,59,37,0],[223,0.989583,
71,55,0],[223.333,0.333333,64,42,0],[223.667,0.333333,68,44,0]],[[224,0.989583,37,37,0],[224,0.989583,49,39,0],[224,0.333333,57,51,0],[224,0.989583,69,60,0],[224.333,0.333333,64,33,0],[224.667,0.333333,68,33,0],[225,0.989583,39,39,0],[225,0.989583,51,38,0],[225,0.333333,57,40,0],[225,0.989583,69,57,0],[225.333,0.333333,63,44,0],[225.667,0.333333,66,40,0],[226,0.989583,36,39,0],[226,0.989583,48,35,0],[226,0.333333,56,38,0],[226,0.989583,68,68,0],[226.333,0.333333,63,34,0],[226.667,0.333333,66,37,0],
[227,0.989583,37,36,0],[227,0.989583,49,33,0],[227,0.333333,56,38,0],[227,0.989583,68,57,0],[227.333,0.333333,61,38,0],[227.667,0.333333,64,39,0]],[[228,1.98958,33,29,0],[228,1.98958,45,34,0],[228,0.333333,54,48,0],[228,1.98958,66,56,0],[228.333,0.333333,61,33,0],[228.667,0.333333,63,34,0],[229,0.333333,54,46,0],[229.333,0.333333,61,37,0],[229.667,0.333333,63,36,0],[230,0.989583,32,44,0],[230,0.989583,44,40,0],[230,0.333333,56,54,0],[230,0.989583,68,67,0],[230.333,0.333333,61,34,0],[230.667,0.333333,
63,33,0],[231,0.989583,30,45,0],[231,0.989583,42,44,0],[231,0.333333,57,56,0],[231,0.989583,69,70,0],[231.333,0.333333,61,35,0],[231.667,0.333333,63,39,0]],[[232,1.98958,32,43,0],[232,1.98958,44,31,0],[232,0.333333,56,45,0],[232,1.98958,68,61,0],[232.333,0.333333,61,31,0],[232.667,0.333333,64,31,0],[233,0.333333,56,32,0],[233.333,0.333333,61,26,0],[233.667,0.333333,64,36,0],[234,1.98958,32,35,0],[234,1.98958,44,30,0],[234,0.333333,54,13,0],[234,0.989583,68,44,0],[234.333,0.333333,60,22,0],[234.667,
0.333333,63,33,0],[235,0.333333,54,42,0],[235.333,0.333333,60,27,0],[235.667,0.333333,63,43,0]],[[236,3.98958,37,33,0],[236,2.98958,44,27,0],[236,0.333333,52,39,0],[236.333,0.333333,56,34,0],[236.667,0.322917,61,42,0],[236.667,0.333333,61,42,0],[237,0.333333,56,44,0],[237.333,0.333333,61,28,0],[237.667,0.333333,64,38,0],[238,0.333333,56,36,0],[238.333,0.333333,61,32,0],[238.667,0.333333,64,38,0],[239,0.75,44,61,0],[239,0.333333,56,43,0],[239.333,0.333333,61,37,0],[239.667,0.333333,64,36,0],[239.75,
0.25,44,61,0]],[[240,3.98958,36,52,0],[240,2.98958,44,46,0],[240,0.333333,56,51,0],[240.333,0.333333,63,38,0],[240.667,0.333333,66,36,0],[241,0.333333,56,46,0],[241.333,0.333333,63,28,0],[241.667,0.333333,66,30,0],[242,0.333333,56,44,0],[242.333,0.333333,63,34,0],[242.667,0.333333,66,30,0],[243,0.75,44,64,0],[243,0.333333,56,56,0],[243.333,0.333333,63,34,0],[243.667,0.333333,66,39,0],[243.75,0.25,44,48,0]],[[244,3.98958,37,43,0],[244,2.98958,44,55,0],[244,0.333333,56,45,0],[244.333,0.333333,64,51,
0],[244.667,0.333333,61,33,0],[245,0.333333,68,65,0],[245.333,0.333333,64,42,0],[245.667,0.333333,73,61,0],[246,0.333333,68,53,0],[246.333,0.333333,76,74,0],[246.667,0.333333,73,55,0],[247,0.75,44,69,0],[247,0.333333,80,73,0],[247.333,0.333333,76,52,0],[247.667,0.333333,73,56,0],[247.75,0.25,44,62,0]],[[248,2.98958,32,60,0],[248,2.98958,44,60,0],[248,0.333333,72,66,0],[248.333,0.333333,75,52,0],[248.667,0.333333,69,46,0],[249,0.333333,72,64,0],[249.333,0.333333,66,40,0],[249.667,0.333333,69,39,0],
[250,0.333333,63,57,0],[250.333,0.333333,66,45,0],[250.667,0.333333,57,52,0],[251,0.75,44,49,0],[251,0.333333,60,67,0],[251.333,0.333333,56,36,0],[251.667,0.333333,54,56,0],[251.75,0.25,44,51,0]],[[252,2.98958,37,44,0],[252,2.98958,44,52,0],[252,0.333333,52,51,0],[252,0.333333,61,58,0],[252.333,0.333333,64,61,0],[252.667,0.333333,61,45,0],[253,0.333333,68,62,0],[253.333,0.333333,64,53,0],[253.667,0.333333,73,67,0],[254,0.333333,68,42,0],[254.333,0.333333,76,74,0],[254.667,0.333333,73,48,0],[255,0.75,
44,61,0],[255,0.333333,80,72,0],[255.333,0.333333,76,62,0],[255.667,0.333333,73,56,0],[255.75,0.25,44,64,0]],[[256,2.98958,32,54,0],[256,2.98958,44,61,0],[256,0.333333,72,64,0],[256.333,0.333333,75,46,0],[256.667,0.333333,69,44,0],[257,0.333333,72,55,0],[257.333,0.333333,66,50,0],[257.667,0.333333,69,49,0],[258,0.333333,63,62,0],[258.333,0.333333,66,49,0],[258.667,0.333333,57,62,0],[259,0.75,44,56,0],[259,0.333333,60,63,0],[259.333,0.333333,56,52,0],[259.667,0.333333,54,47,0],[259.75,0.25,44,51,0]],
[[260,7.98958,37,47,0],[260,1.98958,44,46,0],[260,0.333333,52,49,0],[260.333,0.333333,56,45,0],[260.667,0.322917,61,51,0],[260.667,0.333333,61,51,0],[261,0.333333,64,49,0],[261.333,0.333333,61,37,0],[261.667,0.333333,56,30,0],[262,1.98958,49,54,0],[262.333,0.333333,52,29,0],[262.667,0.333333,56,33,0],[263,0.333333,61,49,0],[263.333,0.333333,56,40,0],[263.667,0.333333,52,34,0]],[[264,0.989583,44,38,0],[264.333,0.333333,49,38,0],[264.667,0.333333,52,35,0],[265,0.333333,56,51,0],[265.333,0.333333,52,
37,0],[265.667,0.333333,49,36,0],[266,0.333333,44,33,0],[266.333,0.333333,49,36,0],[266.667,0.333333,44,40,0],[267,0.333333,40,44,0],[267.333,0.333333,44,39,0],[267.667,0.333333,40,41,0]],[[268,1.98958,37,43,0],[270,1.98958,37,33,0],[270,1.98958,44,33,0],[270,1.98958,49,27,0],[270,1.98958,52,34,0],[270,1.98958,56,51,0],[270,1.98958,61,49,0]],[[272,3.98958,37,22,0],[272,3.98958,44,29,0],[272,3.98958,49,23,0],[272,3.98958,52,18,0],[272,3.98958,56,38,0],[272,3.98958,61,33,0]]];
$(document).keydown(function(a){27==a.keyCode&&$("#cancel").click();feedbackFormDisplayed||(a.keyCode==LEFT_ARROW?setCurrentMeasure("-"):a.keyCode==RIGHT_ARROW&&setCurrentMeasure("+"),38==a.keyCode?updateTempo("tempo","+"):40==a.keyCode?updateTempo("tempo","-"):191==a.keyCode?updateEndMeasure("+"):190==a.keyCode?updateEndMeasure("-"):90==a.keyCode?updateStartMeasure("-"):88==a.keyCode?updateStartMeasure("+"):a.keyCode==SPACE?$("#playBtn").click():13==a.keyCode?($("#startMeasure").blur(),$("#endMeasure").blur()):
a.keyCode==L?didPressLeftHand():a.keyCode==R?didPressRightHand():66==a.keyCode?$("input[name=hand][value=both]").prop("checked",!0):a.keyCode==S?didPressStopButton():84==a.keyCode&&repeatToggle())});SPACE=32;S=83;L=76;R=82;RIGHT_ARROW=39;LEFT_ARROW=37;
var info={measureControl:"Press LEFT and RIGHT keys to change the Start Measure.<br>Press UP and DOWN keys to change the End Measure.<br>Press T to toggle between repeat and NO repeat.",playControl:"Press SPACE key to toggle between Play and Pause.<br>Press S to stop.",tempoControl:"Press < to decrease tempo.<br>Press > to increase tempo.",handControl:"Press L for left hand only.<br>Press R for right hand only.<br>Press B to display both hands.",repeatControl:"<br>Press 1 to repeat one measure.<br>Press 2 to repeat two measures."};
function drawScreen(){setSceenWidth();drawHeader();drawMeasureGrid();drawMarkers();colorizeMeasures();drawControls();drawMetronome();drawPiano();setEvents();drawfeedback();display()}function setSceenWidth(){screenWidth=screen.width;userAgent=navigator.userAgent;-1!==userAgent.indexOf("iPhone")?screenWidth=1E3:-1!==userAgent.indexOf("iPad")&&(screenWidth=1E3)}function display(){$("#loading").css("display","none")}
function drawHeader(){$("body").append('<div id="measureGridHeader"></div>');measureGridHeaderWidth=Math.floor(0.8*screenWidth)-1;measureGridHeaderLeft=(screenWidth-measureGridHeaderWidth)/2;measureGridHeaderTop=0;measureGridHeaderHeight=0.065*measureGridHeaderWidth;measureGridHeaderColor="#919191";adjustTag("measureGridHeader",measureGridHeaderLeft,measureGridHeaderTop,measureGridHeaderWidth,measureGridHeaderHeight,measureGridHeaderColor);$("body").append('<img id="logo" src="./images/logo.png"></img>');
logoLeft=measureGridHeaderLeft+0.03*measureGridHeaderWidth;logoHeight=0.8*measureGridHeaderHeight;logoTop=measureGridHeaderTop+(measureGridHeaderHeight-logoHeight)/2;logoWidth=1.3*measureGridHeaderHeight;adjustTag("logo",logoLeft,logoTop,logoWidth,logoHeight,"clear");$("body").append('<img id="composerPic" src="./images/beethoven.jpeg"></img>');composerPicTop=measureGridHeaderTop;composerPicHeight=measureGridHeaderHeight;composerPicWidth=1.2*measureGridHeaderHeight;composerPicLeft=measureGridHeaderLeft+
measureGridHeaderWidth-composerPicWidth;adjustTag("composerPic",composerPicLeft,composerPicTop,composerPicWidth,composerPicHeight,"clear");$("body").append('<div id="tuneLabel">Moonlight Sonata</div>');tuneLabelLeft=measureGridHeaderLeft;tuneLabelTop=measureGridHeaderTop+0.1*measureGridHeaderHeight;tuneLabelWidth=measureGridHeaderWidth;tuneLabelHeight=0.4*measureGridHeaderHeight;adjustTag("tuneLabel",tuneLabelLeft,tuneLabelTop,tuneLabelWidth,tuneLabelHeight,"clear");$("body").append('<div id="artisitLabel">L.V. Beethoven</div>');
artisitLabelLeft=measureGridHeaderLeft;artisitLabelTop=measureGridHeaderTop+0.55*measureGridHeaderHeight;artisitLabelWidth=measureGridHeaderWidth;artisitLabelHeight=0.25*measureGridHeaderHeight;adjustTag("artisitLabel",artisitLabelLeft,artisitLabelTop,artisitLabelWidth,artisitLabelHeight,"clear")}
function drawMeasureGrid(){maxColumn=23;maxBoxes=Math.floor(tune.length/maxColumn);maxBoxes=maxColumn*(maxBoxes+1);measureBoxLeft=measureGridHeaderLeft;measureBoxHeight=measureBoxWidth=measureGridHeaderWidth/maxColumn;measureBoxTop=measureGridHeaderTop+measureGridHeaderHeight;measureBoxColor="#cbcbcb";measureBoxLabelWidth=0.4*measureBoxWidth;measureBoxLabelTop=measureBoxLabelLeft=(measureBoxWidth-measureBoxLabelWidth)/2;measureBoxLabelHeight=measureBoxLabelWidth;for(number=1;number<=maxBoxes;number++)$("body").append('<div id="measureBox-'+
number+'" class="measureBox" style="border-style:solid; border-width:1px"></div>'),adjustTag("measureBox-"+number,measureBoxLeft,measureBoxTop,measureBoxWidth,measureBoxHeight,measureBoxColor),number<tune.length?(measureBoxLabel='<div id="measureBoxLabel-'+number+'">'+number+"</div>",$("#measureBox-"+number).append(measureBoxLabel),adjustTag("measureBoxLabel-"+number,measureBoxLabelLeft,measureBoxLabelTop,measureBoxLabelWidth,measureBoxLabelHeight,"clear"),$("#measureBoxLabel-"+number).css("position",
"absolute")):$("#measureBox-"+number).attr("class",""),measureBoxLeft+=measureBoxWidth,measureBoxLeft>=measureGridHeaderLeft+measureGridHeaderWidth-measureBoxWidth/2&&(measureBoxLeft=(screenWidth-measureGridHeaderWidth)/2,measureBoxTop+=measureBoxHeight)}
function drawMarkers(){$("body").append('<div id="positionMarker" ></div>');positionMarkerLeft=$("#measureBox-1").css("left").replace(/px/g,"");positionMarkerTop=$("#measureBox-1").css("top").replace(/px/g,"");positionMarkerWidth=Math.floor(0.1*measureBoxWidth);positionMarkerHeight=measureBoxHeight;adjustTag("positionMarker",positionMarkerLeft,positionMarkerTop,positionMarkerWidth,positionMarkerHeight,"green");$("body").append('<img id="leftMarker" src="./images/leftMark.png"></img>');leftMarkLeft=
$("#measureBox-1").css("left").replace(/px/g,"");leftMarkTop=$("#measureBox-1").css("top").replace(/px/g,"");leftMarkWidth=Math.floor(0.4*measureBoxWidth);leftMarkHeight=measureBoxHeight;adjustTag("leftMarker",leftMarkLeft,leftMarkTop,leftMarkWidth,leftMarkHeight,"clear");$("body").append('<img id="rightMarker" src="./images/rightMark.png"></img>');rightMarkLeft=$("#measureBox-"+endMeasure).css("left").replace(/px/g,"")-leftMarkWidth+1+measureBoxWidth;rightMarkTop=leftMarkTop;rightMarkWidth=leftMarkWidth;
rightMarkHeight=measureBoxHeight;adjustTag("rightMarker",rightMarkLeft,rightMarkTop,rightMarkWidth,rightMarkHeight,"clear")}
function drawControls(){$("body").append('<img id="controlsBackground" src="./images/controlsBackground.png"></img>');controlsBackgroundLeft=measureGridHeaderLeft;controlsBackgroundTop=Number($("#measureBox-68").css("top").replace(/px/g,""))+measureBoxHeight;controlsBackgroundWidth=measureGridHeaderWidth;controlsBackgroundHeight=1.5*measureBoxHeight;adjustTag("controlsBackground",controlsBackgroundLeft,controlsBackgroundTop,controlsBackgroundWidth,controlsBackgroundHeight,"clear");$("body").append('<div id="handsLabel">Hands</div>');
handsLabelLeft=controlsBackgroundLeft+0.01*controlsBackgroundWidth;handsLabelTop=controlsBackgroundTop+0.1*controlsBackgroundHeight;handsLabelWidth=0.05*controlsBackgroundWidth;handsLabelHeight=0.2*controlsBackgroundHeight;adjustTag("handsLabel",handsLabelLeft,handsLabelTop,handsLabelWidth,handsLabelHeight,"clear");$("body").append('<img id="leftHand" src="./images/leftHandEnabled.png" onclick="didPressLeftHand()"></img>');leftHandHeight=leftHandWidth=0.6*controlsBackgroundHeight;leftHandLeft=controlsBackgroundLeft+
0.1*controlsBackgroundWidth;leftHandTop=controlsBackgroundTop+(controlsBackgroundHeight-leftHandHeight)/2;adjustTag("leftHand",leftHandLeft,leftHandTop,leftHandWidth,leftHandHeight,"clear");$("body").append('<img id="rightHand" src="./images/rightHandEnabled.png" onclick="didPressRightHand()"></img>');rightHandWidth=0.6*controlsBackgroundHeight;rightHandHeight=leftHandHeight;rightHandLeft=controlsBackgroundLeft+0.2*controlsBackgroundWidth;rightHandTop=controlsBackgroundTop+(controlsBackgroundHeight-
rightHandHeight)/2;adjustTag("rightHand",rightHandLeft,rightHandTop,rightHandWidth,rightHandHeight,"clear");$("body").append('<img id="infoButton" src="./images/info.png"></img>');infoButtonHeight=infoButtonWidth=0.3*controlsBackgroundHeight;infoButtonLeft=controlsBackgroundLeft+0.3*controlsBackgroundWidth;infoButtonTop=controlsBackgroundTop+0.1*controlsBackgroundHeight;adjustTag("infoButton",infoButtonLeft,infoButtonTop,infoButtonWidth,infoButtonHeight,"clear");$("body").append('<img id="divider1" src="./images/divider.png"></img>');
dividerLeft=controlsBackgroundLeft+0.35*controlsBackgroundWidth;dividerTop=controlsBackgroundTop;dividerWidth=20;dividerHeight=controlsBackgroundHeight;adjustTag("divider1",dividerLeft,dividerTop,dividerWidth,dividerHeight,"clear");$("body").append('<div id="playLabel">Play</div>');playLabelLeft=controlsBackgroundLeft+0.37*controlsBackgroundWidth;playLabelTop=controlsBackgroundTop+0.1*controlsBackgroundHeight;playLabelWidth=0.05*controlsBackgroundWidth;playLabelHeight=0.2*controlsBackgroundHeight;
adjustTag("playLabel",playLabelLeft,playLabelTop,playLabelWidth,playLabelHeight,"clear");$("body").append('<img id="playBtn" src="./images/playButton.png" onclick="didPressPlayButton()"></img>');playButtonLeft=controlsBackgroundLeft+0.43*controlsBackgroundWidth;playButtonTop=rightHandTop;playButtonWidth=0.6*controlsBackgroundHeight;playButtonHeight=leftHandHeight;adjustTag("playBtn",playButtonLeft,playButtonTop,playButtonWidth,playButtonHeight,"clear");$("body").append('<img id="stopBtn" src="./images/stopButton.png" onclick="didPressStopButton()"></img>');
stopButtonLeft=controlsBackgroundLeft+0.5*controlsBackgroundWidth;stopButtonTop=rightHandTop;stopButtonWidth=0.6*controlsBackgroundHeight;stopButtonHeight=leftHandHeight;adjustTag("stopBtn",stopButtonLeft,stopButtonTop,stopButtonWidth,stopButtonHeight,"clear");$("body").append('<img id="repeatButton" src="./images/repeatEnabled.png" onclick="didPressRepeatButton()"></img>');repeatButtonLeft=controlsBackgroundLeft+0.555*controlsBackgroundWidth;repeatButtonTop=rightHandTop;repeatButtonWidth=0.6*controlsBackgroundHeight;
repeatButtonHeight=leftHandHeight;adjustTag("repeatButton",repeatButtonLeft,repeatButtonTop,repeatButtonWidth,repeatButtonHeight,"clear");$("body").append('<img id="divider2" src="./images/divider.png"></img>');dividerLeft=controlsBackgroundLeft+0.6*controlsBackgroundWidth;dividerTop=controlsBackgroundTop;dividerWidth=20;dividerHeight=controlsBackgroundHeight;adjustTag("divider2",dividerLeft,dividerTop,dividerWidth,dividerHeight,"clear");$("body").append('<div id="tempoLabel">Tempo</div>');tempoLabelLeft=
controlsBackgroundLeft+0.65*controlsBackgroundWidth;tempoLabelTop=controlsBackgroundTop+0.1*controlsBackgroundHeight;tempoLabelWidth=0.05*controlsBackgroundWidth;tempoLabelHeight=0.2*controlsBackgroundHeight;adjustTag("tempoLabel",tempoLabelLeft,tempoLabelTop,tempoLabelWidth,tempoLabelHeight,"clear");$("body").append('<img id="metronome" src="./images/metronome.png"></img>');metronomeHeight=0.6*controlsBackgroundHeight;metronomeLeft=controlsBackgroundLeft+0.7*controlsBackgroundWidth;metronomeTop=
controlsBackgroundTop+0.7*(controlsBackgroundHeight-metronomeHeight);metronomeWidth=0.6*metronomeHeight;adjustTag("metronome",metronomeLeft,metronomeTop,metronomeWidth,metronomeHeight,"clear");$("body").append('<div id="slowLabel">Slow</div>');slowLabelLeft=controlsBackgroundLeft+0.75*controlsBackgroundWidth;slowLabelTop=controlsBackgroundTop+0.65*controlsBackgroundHeight;slowLabelWidth=0.05*controlsBackgroundWidth;slowLabelHeight=0.2*controlsBackgroundHeight;adjustTag("slowLabel",slowLabelLeft,slowLabelTop,
slowLabelWidth,slowLabelHeight,"clear");$("body").append('<div id="fastLabel">Fast</div>');fastLabelLeft=controlsBackgroundLeft+0.9*controlsBackgroundWidth;fastLabelTop=slowLabelTop;fastLabelWidth=0.05*controlsBackgroundWidth;fastLabelHeight=0.2*controlsBackgroundHeight;adjustTag("fastLabel",fastLabelLeft,fastLabelTop,fastLabelWidth,fastLabelHeight,"clear");$("body").append('<div id="positionLabel">1.00</div>');positionLabelLeft=controlsBackgroundLeft+0.37*controlsBackgroundWidth;positionLabelTop=
controlsBackgroundTop+0.38*controlsBackgroundHeight;positionLabelHeight=positionLabelWidth=0.03*controlsBackgroundWidth;adjustTag("positionLabel",positionLabelLeft,positionLabelTop,positionLabelWidth,positionLabelHeight,"clear")}
function drawMetronome(){metronomeBoxLeft=slowLabelLeft+slowLabelWidth/2;metronomeBoxWidth=(fastLabelLeft-slowLabelLeft)/7;metronomeBoxHeight=controlsBackgroundHeight;metronomeBoxTop=controlsBackgroundTop+(controlsBackgroundHeight-metronomeBoxHeight)/2;metronomeBoxColor="clear";draggerTrackLeft=metronomeBoxLeft;draggerTrackWidth=fastLabelLeft-slowLabelLeft;draggerTrackHeight=0.4*metronomeBoxWidth;draggerTrackTop=controlsBackgroundTop+(controlsBackgroundHeight-draggerTrackHeight)/2;draggerTrackColor=
"5884F1";$("body").append('<div id="draggerTrack"></div>');adjustTag("draggerTrack",draggerTrackLeft,draggerTrackTop,draggerTrackWidth,draggerTrackHeight,draggerTrackColor);for(number=1;13>=number;number+=2)$("body").append('<div id="metronomeBox-'+number+'" class="metronomeBox" style="border-style:solid; border-width:0px"></div>'),adjustTag("metronomeBox-"+number,metronomeBoxLeft,metronomeBoxTop,metronomeBoxWidth,metronomeBoxHeight,metronomeBoxColor),metronomeBoxLeft+=metronomeBoxWidth;draggerBoxLeft=
$("#metronomeBox-7").css("left").replace(/px/g,"");draggerBoxHeight=draggerBoxWidth=metronomeBoxWidth;draggerBoxTop=metronomeBoxTop-(draggerBoxHeight-metronomeBoxHeight)/2;$("body").append('<img id="dragger" src="./images/dragger.png"></img>');adjustTag("dragger",draggerBoxLeft,draggerBoxTop,draggerBoxWidth,draggerBoxHeight,"clear")}
function drawPiano(){$("body").append('<img id="redVelvet" src="./images/redLine.png" style="z-index:5"></img>');redLineLeft=controlsBackgroundLeft;redLineTop=controlsBackgroundTop+controlsBackgroundHeight;redLineWidth=controlsBackgroundWidth;redLineHeight=5;adjustTag("redVelvet",redLineLeft,redLineTop,redLineWidth,redLineHeight,"clear");whiteKeyWidth=controlsBackgroundWidth/52.5;whiteKeyLeft=controlsBackgroundLeft+0.4*(controlsBackgroundWidth-52*whiteKeyWidth);whiteKeyTop=redLineTop+redLineHeight;
whiteKeyHeight=4.3*whiteKeyWidth;whiteKeyLabelLeft=0;whiteKeyLabelTop=0.6*whiteKeyHeight;whiteKeyLabelWidth=whiteKeyWidth;whiteKeyLabelHeight=1.5*whiteKeyLabelWidth;blackKeyLeft=controlsBackgroundLeft;blackKeyTop=whiteKeyTop;blackKeyWidth=Math.floor(0.65*whiteKeyWidth);blackKeyHeight=Math.floor(0.58*whiteKeyHeight);blackKeyLabelLeft=0;blackKeyLabelTop=0.5*blackKeyHeight;blackKeyLabelWidth=blackKeyWidth;blackKeyLabelHeight=1.5*blackKeyLabelWidth;$("body").append('<div id="keyboardBgrd"></div>');keyboardBgrdLeft=
controlsBackgroundLeft;keyboardBgrdTop=redLineTop+redLineHeight;keyboardBgrdWidth=controlsBackgroundWidth;keyboardBgrdHeight=1.07*whiteKeyHeight;adjustTag("keyboardBgrd",keyboardBgrdLeft,keyboardBgrdTop,keyboardBgrdWidth,keyboardBgrdHeight,"black");for(var a=0;88>a;a++){var b=a%12;1==b||4==b||6==b||9==b||11==b?(blackKeyLeft=whiteKeyLeft+Math.floor(0.75*whiteKeyWidth),$("body").append('<div id="key-'+a+'" class="key" style="z-index:3"></div>'),adjustTag("key-"+a,blackKeyLeft,blackKeyTop,blackKeyWidth,
blackKeyHeight,"black"),$("#key-"+a).append('<b><div id="keyLabel-'+a+'" class="keyLabel" style="color:#330099"></div></b>'),adjustTag("keyLabel-"+a,blackKeyLabelLeft,blackKeyLabelTop,blackKeyLabelWidth,blackKeyLabelHeight,"clear")):(0!=a&&(whiteKeyLeft+=whiteKeyWidth),$("body").append('<div id="key-'+a+'" class="key" style="border-style:solid; border-width:2px; z-index:2"></div>'),adjustTag("key-"+a,whiteKeyLeft,whiteKeyTop,whiteKeyWidth,whiteKeyHeight,"white"),$("#key-"+a).append('<b><div id="keyLabel-'+
a+'" class="keyLabel" style="color:#330099"></div></b>'),adjustTag("keyLabel-"+a,whiteKeyLabelLeft,whiteKeyLabelTop,whiteKeyLabelWidth,whiteKeyLabelHeight,"clear"))}}
function setEvents(){$("img").on("dragstart",function(a){a.preventDefault()});rightMarkerMouseDown=leftMarkerMouseDown=0;$("#leftMarker").mousedown(function(){leftMarkerMouseDown=1});$("#rightMarker").mousedown(function(){rightMarkerMouseDown=1});$("body").mouseup(function(){draggerMouseDown=rightMarkerMouseDown=leftMarkerMouseDown=0});$(".measureBox").hover(function(){measureBoxId=$(this).attr("id");newMeasure=measureBoxId.replace(/measureBox-/g,"");leftMarkerMouseDown?setStartMeasure(newMeasure):
rightMarkerMouseDown&&setEndMeasure(newMeasure)});$(".measureBox").click(function(){measureBoxId=$(this).attr("id");newMeasure=measureBoxId.replace(/measureBox-/g,"");setCurrentMeasure(newMeasure)});keyPressTimer=0;$(".key").click(function(){clearTimeout(keyPressTimer);resetNote(notePress);keyPress=$(this).attr("id").replace(/key-/g,"");notePress=Number(keyPress)+21;MIDI.noteOn(0,notePress,90,0);MIDI.noteOff(0,notePress,0.4);$("#key-"+keyPress).css("background-color","yellow");keyPressTimer=setTimeout(function(){resetNote(notePress)},
400)});$(".metronomeBox").click(function(){newMetronomeBox=$(this).attr("id");newMetronomeBox=Number(newMetronomeBox.replace(/metronomeBox-/g,""));draggerBoxLeft=$("#metronomeBox-"+newMetronomeBox).css("left").replace(/px/g,"");$("#dragger").css("left",draggerBoxLeft);setTempo(newMetronomeBox)});$(".metronomeBox").hover(function(){metronomeBoxId=$(this).attr("id");newTempo=metronomeBoxId.replace(/metronomeBox-/g,"");draggerMouseDown&&(draggerBoxLeft=$("#metronomeBox-"+newTempo).css("left").replace(/px/g,
""),$("#dragger").css("left",draggerBoxLeft),setTempo(newTempo))});draggerMouseDown=0;$("#dragger").mousedown(function(){draggerMouseDown=1})}
function setPositionMarker(){position=(Math.floor(100*(delay/4+1))/100).toFixed(2);$("#positionLabel").text(position);currentMeasure=Math.floor(position);measureBoxLeft=Number($("#measureBox-"+currentMeasure).css("left").replace(/px/g,""));measureBoxTop=Number($("#measureBox-"+currentMeasure).css("top").replace(/px/g,""));positionMarkerLeft=measureBoxLeft+(position-currentMeasure)*measureBoxWidth;$("#positionMarker").css("left",positionMarkerLeft);$("#positionMarker").css("top",measureBoxTop);$("#positionMarker").css("width",
positionMarkerWidth);currentMeasure==endMeasure&&(remainingMeasureWidth=measureBoxWidth-(position-currentMeasure)*measureBoxWidth,positionMarkerWidth>remainingMeasureWidth&&$("#positionMarker").css("width",remainingMeasureWidth))}function setStartMarker(a){leftMarkLeft=$("#measureBox-"+a).css("left").replace(/px/g,"");leftMarkTop=$("#measureBox-"+a).css("top").replace(/px/g,"");$("#leftMarker").css("left",leftMarkLeft);$("#leftMarker").css("top",leftMarkTop)}
function setEndMarker(a){rightMarkLeft=$("#measureBox-"+a).css("left").replace(/px/g,"")-leftMarkWidth+1+measureBoxWidth;rightMarkTop=$("#measureBox-"+a).css("top").replace(/px/g,"");$("#rightMarker").css("left",rightMarkLeft);$("#rightMarker").css("top",rightMarkTop)}
function colorizeMeasures(){for(number=1;number<=startMeasure;number++)$("#measureBox-"+number).css("background-color",measureBoxColor);for(number=startMeasure;number<=endMeasure;number++)$("#measureBox-"+number).css("background-color","yellow");for(number=endMeasure+1;number<=maxBoxes;number++)$("#measureBox-"+number).css("background-color",measureBoxColor)}
function didPressLeftHand(){leftHandEnabled?($("#leftHand").attr("src","./images/leftHandDisabled.png"),leftHandEnabled=0,rightHandEnabled||didPressRightHand(),clearHand("left")):($("#leftHand").attr("src","./images/leftHandEnabled.png"),leftHandEnabled=1)}
function didPressRightHand(){rightHandEnabled?($("#rightHand").attr("src","./images/rightHandDisabled.png"),rightHandEnabled=0,leftHandEnabled||didPressLeftHand(),clearHand("right")):($("#rightHand").attr("src","./images/rightHandEnabled.png"),rightHandEnabled=1)}function didPressRepeatButton(){repeatEnabled?($("#repeatButton").attr("src","./images/repeatDisabled.png"),repeatEnabled=0):($("#repeatButton").attr("src","./images/repeatEnabled.png"),repeatEnabled=1)}
function drawfeedback(){feedbackTabLeft=0;feedbackTabTop=controlsBackgroundTop;feedbackTabHeight=screenWidth/55;$("body").append('<div id="feedbackTabLabel">Feedback</div>');adjustTag("feedbackTabLabel",feedbackTabLeft,feedbackTabTop,0,feedbackTabHeight,"green");$("#feedbackTabLabel").css("left",-feedbackTabWidth/2+2);$("#feedbackTabLabel").css({"-webkit-transform":"rotate(-90deg)"});$("#feedbackTabLabel").css({"-o-transform":"rotate(-90deg)"});$("#feedbackTabLabel").css({"-ms-transform":"rotate(-90deg)"});
$("#feedbackTabLabel").css({"-transform":"rotate(-90deg)"});$("#feedbackTabLabel").css({filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.9396926207859084,M12=-0.3420201433256687,M21=0.3420201433256687,M22=0.9396926207859084,sizingMethod='auto expand')"});$("#feedbackTabLabel").css({zoom:"1"})}
function adjustTag(a,b,c,d,e,f){$("#"+a).css("position","absolute");$("#"+a).css("left",b);$("#"+a).css("top",c);$("#"+a).css("width",d);$("#"+a).css("height",e);$("#"+a).css("background-color",f);-1!==a.indexOf("Label")&&(fontSize=getFontSize(e),-1!==a.indexOf("feedbackTabLabel")&&(fontSize-=2),$("#"+a).css("font-size",fontSize+"px"),$("#"+a).css("text-align","center"));-1!==a.indexOf("feedbackTabLabel")&&$("#feedbackTabLabel").css("width",1.2*feedbackTabWidth)}
function getFontSize(a){$("body").append('<div id="textLabel"><span id="textSpan">Feedback</span></div>');fontSize=0;do fontSize+=2,$("#textLabel").css("font-size",fontSize),spanHeight=Number($("#textSpan").css("height").replace(/px/g,"")),feedbackTabWidth=Number($("#textSpan").css("width").replace(/px/g,""));while(spanHeight<a);$("#textLabel").remove();return fontSize}if("undefined"===typeof MIDI)var MIDI={};
(function(){var a={},b=function(b){var d=new Audio,e=b.split(";")[0];d.id="audio";d.setAttribute("preload","auto");d.setAttribute("audiobuffer",!0);d.addEventListener("canplaythrough",function(){a[e]=!0},!1);d.src="data:"+b;document.body.appendChild(d)};MIDI.audioDetect=function(c){if("undefined"===typeof Audio)return c({});var d=new Audio;if("undefined"===typeof d.canPlayType)return c(a);var e=d.canPlayType('audio/ogg; codecs="vorbis"'),e="probably"===e||"maybe"===e,d=d.canPlayType("audio/mpeg"),
d="probably"===d||"maybe"===d;if(!e&&!d)c(a);else{e&&b("audio/ogg;base64,T2dnUwACAAAAAAAAAADqnjMlAAAAAOyyzPIBHgF2b3JiaXMAAAAAAUAfAABAHwAAQB8AAEAfAACZAU9nZ1MAAAAAAAAAAAAA6p4zJQEAAAANJGeqCj3//////////5ADdm9yYmlzLQAAAFhpcGguT3JnIGxpYlZvcmJpcyBJIDIwMTAxMTAxIChTY2hhdWZlbnVnZ2V0KQAAAAABBXZvcmJpcw9CQ1YBAAABAAxSFCElGVNKYwiVUlIpBR1jUFtHHWPUOUYhZBBTiEkZpXtPKpVYSsgRUlgpRR1TTFNJlVKWKUUdYxRTSCFT1jFloXMUS4ZJCSVsTa50FkvomWOWMUYdY85aSp1j1jFFHWNSUkmhcxg6ZiVkFDpGxehifDA6laJCKL7H3lLpLYWKW4q91xpT6y2EGEtpwQhhc+211dxKasUYY4wxxsXiUyiC0JBVAAABAABABAFCQ1YBAAoAAMJQDEVRgNCQVQBABgCAABRFcRTHcRxHkiTLAkJDVgEAQAAAAgAAKI7hKJIjSZJkWZZlWZameZaouaov+64u667t6roOhIasBACAAAAYRqF1TCqDEEPKQ4QUY9AzoxBDDEzGHGNONKQMMogzxZAyiFssLqgQBKEhKwKAKAAAwBjEGGIMOeekZFIi55iUTkoDnaPUUcoolRRLjBmlEluJMYLOUeooZZRCjKXFjFKJscRUAABAgAMAQICFUGjIigAgCgCAMAYphZRCjCnmFHOIMeUcgwwxxiBkzinoGJNOSuWck85JiRhjzjEHlXNOSuekctBJyaQTAAAQ4AAAEGAhFBqyIgCIEwAwSJKmWZomipamiaJniqrqiaKqWp5nmp5pqqpnmqpqqqrrmqrqypbnmaZnmqrqmaaqiqbquqaquq6nqrZsuqoum65q267s+rZru77uqapsm6or66bqyrrqyrbuurbtS56nqqKquq5nqq6ruq5uq65r25pqyq6purJtuq4tu7Js664s67pmqq5suqotm64s667s2rYqy7ovuq5uq7Ks+6os+75s67ru2rrwi65r66os674qy74x27bwy7ouHJMnqqqnqq7rmarrqq5r26rr2rqmmq5suq4tm6or26os67Yry7aumaosm64r26bryrIqy77vyrJui67r66Ys67oqy8Lu6roxzLat+6Lr6roqy7qvyrKuu7ru+7JuC7umqrpuyrKvm7Ks+7auC8us27oxuq7vq7It/KosC7+u+8Iy6z5jdF1fV21ZGFbZ9n3d95Vj1nVhWW1b+V1bZ7y+bgy7bvzKrQvLstq2scy6rSyvrxvDLux8W/iVmqratum6um7Ksq/Lui60dd1XRtf1fdW2fV+VZd+3hV9pG8OwjK6r+6os68Jry8ov67qw7MIvLKttK7+r68ow27qw3L6wLL/uC8uq277v6rrStXVluX2fsSu38QsAABhwAAAIMKEMFBqyIgCIEwBAEHIOKQahYgpCCKGkEEIqFWNSMuakZM5JKaWUFEpJrWJMSuaclMwxKaGUlkopqYRSWiqlxBRKaS2l1mJKqcVQSmulpNZKSa2llGJMrcUYMSYlc05K5pyUklJrJZXWMucoZQ5K6iCklEoqraTUYuacpA46Kx2E1EoqMZWUYgupxFZKaq2kFGMrMdXUWo4hpRhLSrGVlFptMdXWWqs1YkxK5pyUzDkqJaXWSiqtZc5J6iC01DkoqaTUYiopxco5SR2ElDLIqJSUWiupxBJSia20FGMpqcXUYq4pxRZDSS2WlFosqcTWYoy1tVRTJ6XFklKMJZUYW6y5ttZqDKXEVkqLsaSUW2sx1xZjjqGkFksrsZWUWmy15dhayzW1VGNKrdYWY40x5ZRrrT2n1mJNMdXaWqy51ZZbzLXnTkprpZQWS0oxttZijTHmHEppraQUWykpxtZara3FXEMpsZXSWiypxNhirLXFVmNqrcYWW62ltVprrb3GVlsurdXcYqw9tZRrrLXmWFNtBQAADDgAAASYUAYKDVkJAEQBAADGMMYYhEYpx5yT0ijlnHNSKucghJBS5hyEEFLKnINQSkuZcxBKSSmUklJqrYVSUmqttQIAAAocAAACbNCUWByg0JCVAEAqAIDBcTRNFFXVdX1fsSxRVFXXlW3jVyxNFFVVdm1b+DVRVFXXtW3bFn5NFFVVdmXZtoWiqrqybduybgvDqKqua9uybeuorqvbuq3bui9UXVmWbVu3dR3XtnXd9nVd+Bmzbeu2buu+8CMMR9/4IeTj+3RCCAAAT3AAACqwYXWEk6KxwEJDVgIAGQAAgDFKGYUYM0gxphhjTDHGmAAAgAEHAIAAE8pAoSErAoAoAADAOeecc84555xzzjnnnHPOOeecc44xxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY0wAwE6EA8BOhIVQaMhKACAcAABACCEpKaWUUkoRU85BSSmllFKqFIOMSkoppZRSpBR1lFJKKaWUIqWgpJJSSimllElJKaWUUkoppYw6SimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaVUSimllFJKKaWUUkoppRQAYPLgAACVYOMMK0lnhaPBhYasBAByAwAAhRiDEEJpraRUUkolVc5BKCWUlEpKKZWUUqqYgxBKKqmlklJKKbXSQSihlFBKKSWUUkooJYQQSgmhlFRCK6mEUkoHoYQSQimhhFRKKSWUzkEoIYUOQkmllNRCSB10VFIpIZVSSiklpZQ6CKGUklJLLZVSWkqpdBJSKamV1FJqqbWSUgmhpFZKSSWl0lpJJbUSSkklpZRSSymFVFJJJYSSUioltZZaSqm11lJIqZWUUkqppdRSSiWlkEpKqZSSUmollZRSaiGVlEpJKaTUSimlpFRCSamlUlpKLbWUSkmptFRSSaWUlEpJKaVSSksppRJKSqmllFpJKYWSUkoplZJSSyW1VEoKJaWUUkmptJRSSymVklIBAEAHDgAAAUZUWoidZlx5BI4oZJiAAgAAQABAgAkgMEBQMApBgDACAQAAAADAAAAfAABHARAR0ZzBAUKCwgJDg8MDAAAAAAAAAAAAAACAT2dnUwAEAAAAAAAAAADqnjMlAgAAADzQPmcBAQA=");
d&&b("audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq");var f=(new Date).getTime(),g=window.setInterval(function(){for(var b in a);var d=5E3<(new Date).getTime()-f;if(b||d)window.clearInterval(g),c(a)},1)}}})();
"undefined"===typeof MIDI&&(MIDI={});"undefined"===typeof MIDI.Soundfont&&(MIDI.Soundfont={});
(function(){MIDI.loadPlugin=function(c){"function"===typeof c&&(c={callback:c});var e=c.instruments||c.instrument||"acoustic_grand_piano";"object"!==typeof e&&(e=[e]);e.map(function(a){"number"===typeof a&&(a=MIDI.GeneralMIDI.byId[a]);return a});MIDI.soundfontUrl=c.soundfontUrl||MIDI.soundfontUrl||"./soundfont/";MIDI.audioDetect(function(f){var g="",g=b[c.api]?c.api:b[window.location.hash.substr(1)]?window.location.hash.substr(1):window.webkitAudioContext?"webaudio":window.Audio?"audiotag":"flash";
if(a[g])a[g](f["audio/ogg"]?"ogg":"mp3",e,c)})};var a={webmidi:function(a,b,c){MIDI.loader&&MIDI.loader.message("Web MIDI API...");MIDI.WebMIDI.connect(c)},flash:function(a,b,c){MIDI.loader&&MIDI.loader.message("Flash API...");DOMLoader.script.add({src:"./inc/SoundManager2/script/soundmanager2.js",verify:"SoundManager",callback:function(){MIDI.Flash.connect(c)}})},audiotag:function(a,b,f){MIDI.loader&&MIDI.loader.message("HTML5 Audio API...");var g=c({items:b,getNext:function(b){DOMLoader.script.add({src:MIDI.soundfontUrl+
b+"-"+a+".js",verify:"MIDI.Soundfont."+b,callback:function(){MIDI.loader&&MIDI.loader.update(null,"Downloading...",100);g.getNext()}})},onComplete:function(){MIDI.AudioTag.connect(f)}})},webaudio:function(a,b,f){MIDI.loader&&MIDI.loader.message("Web Audio API...");var g=c({items:b,getNext:function(b){DOMLoader.script.add({src:MIDI.soundfontUrl+b+"-"+a+".js",verify:"MIDI.Soundfont."+b,callback:function(){MIDI.loader&&MIDI.loader.update(null,"Downloading...",100);g.getNext()}})},onComplete:function(){MIDI.WebAudio.connect(f)}})}},
b={webmidi:!0,webaudio:!0,audiotag:!0,flash:!0},c=function(a){var b={queue:[]},c;for(c in a.items)b.queue.push(a.items[c]);b.getNext=function(){if(!b.queue.length)return a.onComplete();a.getNext(b.queue.shift())};setTimeout(b.getNext,1);return b}})();"undefined"===typeof MIDI&&(MIDI={});
(function(){var a=function(a){MIDI.api=a.api;MIDI.setVolume=a.setVolume;MIDI.programChange=a.programChange;MIDI.noteOn=a.noteOn;MIDI.noteOff=a.noteOff;MIDI.chordOn=a.chordOn;MIDI.chordOff=a.chordOff;MIDI.stopAllNotes=a.stopAllNotes;MIDI.getInput=a.getInput;MIDI.getOutputs=a.getOutputs};(function(){var b=null,c=null,d=MIDI.WebMIDI={api:"webmidi"};d.setVolume=function(a,b){c.send([176+a,7,b])};d.programChange=function(a,b){c.send([192+a,b])};d.noteOn=function(a,b,d,h){c.send([144+a,b,d],1E3*h)};d.noteOff=
function(a,b,d){c.send([128+a,b,0],1E3*d)};d.chordOn=function(a,b,d,h){for(var k=0;k<b.length;k++)c.send([144+a,b[k],d],1E3*h)};d.chordOff=function(a,b,d){for(var h=0;h<b.length;h++)c.send([128+a,b[h],0],1E3*d)};d.stopAllNotes=function(){for(var a=0;16>a;a++)c.send([176+a,123,0])};d.getInput=function(){return b.getInputs()};d.getOutputs=function(){return b.getOutputs()};d.connect=function(e){a(d);navigator.requestMIDIAccess(function(a){b=a;c=b.getOutput(0);e.callback&&e.callback()},function(a){e.api=
window.webkitAudioContext?"webaudio":window.Audio?"audiotag":"flash";MIDI.loadPlugin(e)})}})();(window.AudioContext||window.webkitAudioContext)&&function(){var b=window.AudioContext||window.webkitAudioContext,c=MIDI.WebAudio={api:"webaudio"},d,e={},f=127,g={},h=function(a,b,c,e,f){var m=MIDI.GeneralMIDI.byName[a],n=m.number,r=b[c];if(!MIDI.Soundfont[a][r])return f(a);var h=MIDI.Soundfont[a][r].split(",")[1],h=Base64Binary.decodeArrayBuffer(h);d.decodeAudioData(h,function(d){for(var h=r;3>h.length;)h+=
"&nbsp;";"undefined"!==typeof MIDI.loader&&MIDI.loader.update(null,m.instrument+"<br>Processing: "+(100*(c/87)>>0)+"%<br>"+h);d.id=r;e[c]=d;if(e.length===b.length){for(;e.length;)(d=e.pop())&&(g[n+""+MIDI.keyToNote[d.id]]=d);f(a)}})};c.setVolume=function(a,b){f=b};c.programChange=function(a,b){MIDI.channels[a].instrument=b};c.noteOn=function(a,b,c,q){if(MIDI.channels[a]){var h=MIDI.channels[a].instrument;if(g[h+""+b]){q<d.currentTime&&(q+=d.currentTime);var m=d.createBufferSource();e[a+""+b]=m;m.buffer=
g[h+""+b];m.connect(d.destination);a=d.createGainNode();c=2*c/127*(f/127)-1;a.connect(d.destination);a.gain.value=Math.max(-1,c);m.connect(a);m.noteOn(q||0);return m}}};c.noteOff=function(a,b,c){c=c||0;c<d.currentTime&&(c+=d.currentTime);if(a=e[a+""+b])return a.gain.linearRampToValueAtTime(1,c),a.gain.linearRampToValueAtTime(0,c+0.2),a.noteOff(c+0.3),a};c.chordOn=function(a,b,d,e){for(var f={},m,n=0,r=b.length;n<r;n++)f[m=b[n]]=c.noteOn(a,m,d,e);return f};c.chordOff=function(a,b,d){for(var e={},f,
m=0,n=b.length;m<n;m++)e[f=b[m]]=c.noteOff(a,f,d);return e};c.connect=function(e){a(c);MIDI.Player.ctx=d=new b;var f=[],g=MIDI.keyToNote,q;for(q in g)f.push(q);var g=[],u={};q=function(a){delete u[a];for(var b in u)break;b||e.callback()};for(var m in MIDI.Soundfont){u[m]=!0;for(var n=0;n<f.length;n++)h(m,f,n,g,q)}}}();window.Audio&&function(){for(var b=MIDI.AudioTag={api:"audiotag"},c={},d=127,e=-1,f=[],g=[],h={},k=0;12>k;k++)f[k]=new Audio;var l=function(a,b){if(MIDI.channels[a]){var c=MIDI.GeneralMIDI.byId[MIDI.channels[a].instrument].id;
if(b=h[b]){var n=(e+1)%f.length,r=f[n];g[n]=c+""+b.id;r.src=MIDI.Soundfont[c][b.id];r.volume=d/127;r.play();e=n}}},p=function(a,b){if(MIDI.channels[a]){var c=MIDI.GeneralMIDI.byId[MIDI.channels[a].instrument].id;if(b=h[b])for(var c=c+""+b.id,d=0;d<g.length;d++){var e=g[d];e&&e==c&&f[d].pause()}}};b.programChange=function(a,b){MIDI.channels[a].instrument=b};b.setVolume=function(a,b){d=b};b.noteOn=function(a,b,d,e){var f=c[b];if(h[f]){if(e)return window.setTimeout(function(){l(a,f)},1E3*e);l(a,f)}};
b.noteOff=function(a,b,d){var e=c[b];if(h[e]){if(d)return setTimeout(function(){p(a,e)},1E3*d);p(a,e)}};b.chordOn=function(a,b,d,e){for(d=0;d<b.length;d++){var f=c[b[d]];if(h[f]){if(e)return window.setTimeout(function(){l(a,f)},1E3*e);l(a,f)}}};b.chordOff=function(a,b,d){for(var e=0;e<b.length;e++){var f=c[b[e]];if(h[f]){if(d)return window.setTimeout(function(){p(a,f)},1E3*d);p(a,f)}}};b.stopAllNotes=function(){for(var a=0,b=f.length;a<b;a++)f[a].pause()};b.connect=function(d){for(var e in MIDI.keyToNote)c[MIDI.keyToNote[e]]=
e,h[e]={id:e};a(b);d.callback&&d.callback()}}();(function(){var b=MIDI.Flash={api:"flash"},c={},d={};b.programChange=function(a,b){MIDI.channels[a].instrument=b};b.setVolume=function(a,b){};b.noteOn=function(a,b,g,h){if(MIDI.channels[a]&&(b=MIDI.GeneralMIDI.byId[MIDI.channels[a].instrument].number+""+c[b],d[b])){if(h)return window.setTimeout(function(){d[b].play({volume:2*g})},1E3*h);d[b].play({volume:2*g})}};b.noteOff=function(a,b,c){};b.chordOn=function(a,b,g,h){if(MIDI.channels[a]){a=MIDI.GeneralMIDI.byId[MIDI.channels[a].instrument].number;
for(var k in b)h=a+""+c[b[k]],d[h]&&d[h].play({volume:2*g})}};b.chordOff=function(a,b,c){};b.stopAllNotes=function(){};b.connect=function(e){soundManager.flashVersion=9;soundManager.useHTML5Audio=!0;soundManager.url="../inc/SoundManager2/swf/";soundManager.useHighPerformance=!0;soundManager.wmode="transparent";soundManager.flashPollingInterval=1;soundManager.debugMode=!1;soundManager.onload=function(){var f=function(a,b,c){d[MIDI.GeneralMIDI.byName[a].number+""+b]=soundManager.createSound({id:b,url:MIDI.soundfontUrl+
a+"-mp3/"+b+".mp3",multiShot:!0,autoLoad:!0,onload:c})},h;for(h in MIDI.Soundfont)for(var k=[],l=function(){k.push(this.sID);"undefined"!==typeof MIDI.loader&&MIDI.loader.update(null,"Processing: "+this.sID)},p=0;88>p;p++)f(h,c[p+21],l);a(b);var q=window.setInterval(function(){88===k.length&&(window.clearInterval(q),e.callback&&e.callback())},25)};soundManager.onerror=function(){};for(var f in MIDI.keyToNote)c[MIDI.keyToNote[f]]=f}})();MIDI.GeneralMIDI=function(a){var c=function(a){return a.replace(/[^a-z0-9 ]/gi,
"").replace(/[ ]/g,"_").toLowerCase()},d={byName:{},byId:{},byCategory:{}},e;for(e in a)for(var f=a[e],g=0,h=f.length;g<h;g++){var k=f[g];if(k){var l=parseInt(k.substr(0,k.indexOf(" ")),10),k=k.replace(l+" ","");d.byId[--l]=d.byName[c(k)]=d.byCategory[c(e)]={id:c(k),instrument:k,number:l,category:e}}}return d}({Piano:"1 Acoustic Grand Piano;2 Bright Acoustic Piano;3 Electric Grand Piano;4 Honky-tonk Piano;5 Electric Piano 1;6 Electric Piano 2;7 Harpsichord;8 Clavinet".split(";"),"Chromatic Percussion":"9 Celesta;10 Glockenspiel;11 Music Box;12 Vibraphone;13 Marimba;14 Xylophone;15 Tubular Bells;16 Dulcimer".split(";"),
Organ:"17 Drawbar Organ;18 Percussive Organ;19 Rock Organ;20 Church Organ;21 Reed Organ;22 Accordion;23 Harmonica;24 Tango Accordion".split(";"),Guitar:"25 Acoustic Guitar (nylon);26 Acoustic Guitar (steel);27 Electric Guitar (jazz);28 Electric Guitar (clean);29 Electric Guitar (muted);30 Overdriven Guitar;31 Distortion Guitar;32 Guitar Harmonics".split(";"),Bass:"33 Acoustic Bass;34 Electric Bass (finger);35 Electric Bass (pick);36 Fretless Bass;37 Slap Bass 1;38 Slap Bass 2;39 Synth Bass 1;40 Synth Bass 2".split(";"),
Strings:"41 Violin;42 Viola;43 Cello;44 Contrabass;45 Tremolo Strings;46 Pizzicato Strings;47 Orchestral Harp;48 Timpani".split(";"),Ensemble:"49 String Ensemble 1;50 String Ensemble 2;51 Synth Strings 1;52 Synth Strings 2;53 Choir Aahs;54 Voice Oohs;55 Synth Choir;56 Orchestra Hit".split(";"),Brass:"57 Trumpet;58 Trombone;59 Tuba;60 Muted Trumpet;61 French Horn;62 Brass Section;63 Synth Brass 1;64 Synth Brass 2".split(";"),Reed:"65 Soprano Sax;66 Alto Sax;67 Tenor Sax;68 Baritone Sax;69 Oboe;70 English Horn;71 Bassoon;72 Clarinet".split(";"),
Pipe:"73 Piccolo;74 Flute;75 Recorder;76 Pan Flute;77 Blown Bottle;78 Shakuhachi;79 Whistle;80 Ocarina".split(";"),"Synth Lead":"81 Lead 1 (square);82 Lead 2 (sawtooth);83 Lead 3 (calliope);84 Lead 4 (chiff);85 Lead 5 (charang);86 Lead 6 (voice);87 Lead 7 (fifths);88 Lead 8 (bass + lead)".split(";"),"Synth Pad":"89 Pad 1 (new age);90 Pad 2 (warm);91 Pad 3 (polysynth);92 Pad 4 (choir);93 Pad 5 (bowed);94 Pad 6 (metallic);95 Pad 7 (halo);96 Pad 8 (sweep)".split(";"),"Synth Effects":"97 FX 1 (rain);98 FX 2 (soundtrack);99 FX 3 (crystal);100 FX 4 (atmosphere);101 FX 5 (brightness);102 FX 6 (goblins);103 FX 7 (echoes);104 FX 8 (sci-fi)".split(";"),
Ethnic:"105 Sitar;106 Banjo;107 Shamisen;108 Koto;109 Kalimba;110 Bagpipe;111 Fiddle;112 Shanai".split(";"),Percussive:"113 Tinkle Bell;114 Agogo;115 Steel Drums;116 Woodblock;117 Taiko Drum;118 Melodic Tom;119 Synth Drum".split(";"),"Sound effects":"120 Reverse Cymbal;121 Guitar Fret Noise;122 Breath Noise;123 Seashore;124 Bird Tweet;125 Telephone Ring;126 Helicopter;127 Applause;128 Gunshot".split(";")});MIDI.channels=function(){for(var a={},c=0;16>c;c++)a[c]={instrument:0,mute:!1,mono:!1,omni:!1,
solo:!1};return a}();MIDI.pianoKeyOffset=21;MIDI.keyToNote={};MIDI.noteToKey={};(function(){for(var a="C Db D Eb E F Gb G Ab A Bb B".split(" "),c=21;108>=c;c++){var d=a[c%12]+((c-12)/12>>0);MIDI.keyToNote[d]=c;MIDI.noteToKey[c]=d}})()})();"undefined"===typeof MIDI&&(MIDI={});"undefined"===typeof MIDI.Player&&(MIDI.Player={});
(function(){var a=MIDI.Player;a.callback=void 0;a.currentTime=0;a.endTime=0;a.restart=0;a.playing=!1;a.timeWarp=1;a.start=a.resume=function(){-1>a.currentTime&&(a.currentTime=-1);l(a.currentTime)};a.pause=function(){var b=a.restart;p();a.restart=b};a.stop=function(){p();a.restart=0;a.currentTime=0};a.addListener=function(a){f=a};a.removeListener=function(){f=void 0};a.clearAnimation=function(){a.interval&&window.clearInterval(a.interval)};a.setAnimation=function(b){var c="function"===typeof b?b:b.callback;
b=b.interval||30;var d=0,f=0,g=0;a.clearAnimation();a.interval=window.setInterval(function(){if(0!==a.endTime){a.playing?(d=g===a.currentTime?f-(new Date).getTime():0,d=0===a.currentTime?0:a.currentTime-d,g!==a.currentTime&&(f=(new Date).getTime(),g=a.currentTime)):d=a.currentTime;var b=d/1E3,h=b/60,b=60*h+(b-60*h),h=a.endTime/1E3;-1>h-b||c({now:b,end:h,events:e})}},b)};a.loadMidiFile=function(){a.replayer=new Replayer(MidiFile(a.currentData),a.timeWarp);a.data=a.replayer.getData();a.endTime=k()};
a.loadFile=function(b,c){a.stop();if(-1!==b.indexOf("base64,")){var d=window.atob(b.split(",")[1]);a.currentData=d;a.loadMidiFile();c&&c(d)}else d=new XMLHttpRequest,d.open("GET",b),d.overrideMimeType("text/plain; charset=x-user-defined"),d.onreadystatechange=function(){if(4===this.readyState&&200===this.status){for(var b=this.responseText||"",d=[],e=b.length,f=String.fromCharCode,m=0;m<e;m++)d[m]=f(b.charCodeAt(m)&255);b=d.join("");a.currentData=b;a.loadMidiFile();c&&c(b)}},d.send()};var b=[],c,
d=0,e={},f=void 0,g=function(b,d,m,n,g,h){return window.setTimeout(function(){var n={channel:b,note:d,now:m,end:a.endTime,message:g,velocity:h};128===g?delete e[d]:e[d]=n;f&&f(n);a.currentTime=m;a.currentTime===c&&c<a.endTime&&l(c,!0)},m-n)},h=function(){if("WebAudioAPI"===MIDI.lang)return MIDI.Player.ctx;a.ctx||(a.ctx={currentTime:0});return a.ctx},k=function(){for(var b=a.data,c=b.length,d=0.5,e=0;e<c;e++)d+=b[e][1];return d},l=function(e,f){if(a.replayer){f||("undefined"===typeof e&&(e=a.restart),
a.playing&&p(),a.playing=!0,a.data=a.replayer.getData(),a.endTime=k());var m,n=0,r=0,l=a.data,w=h(),x=l.length;c=0.5;d=w.currentTime;for(var v=0;v<x&&100>r;v++)if(c+=l[v][1],c<e)n=c;else{e=c-n;var s=l[v][0].event;if("channel"===s.type){var t=s.channel;switch(s.subtype){case "noteOn":if(MIDI.channels[t].mute)break;m=s.noteNumber-(a.MIDIOffset||0);b.push({event:s,source:MIDI.noteOn(t,s.noteNumber,s.velocity,e/1E3+w.currentTime),interval:g(t,m,c,n,144,s.velocity)});r++;break;case "noteOff":if(MIDI.channels[t].mute)break;
m=s.noteNumber-(a.MIDIOffset||0);b.push({event:s,source:MIDI.noteOff(t,s.noteNumber,e/1E3+w.currentTime),interval:g(t,m,c,n,128)})}}}}},p=function(){var c=h();a.playing=!1;for(a.restart+=1E3*(c.currentTime-d);b.length;)c=b.pop(),window.clearInterval(c.interval),c.source&&("number"===typeof c.source?window.clearTimeout(c.source):(c=c.source,c.disconnect(0),c.noteOff(0)));for(var g in e)c=e[g],144===e[g].message&&f&&f({channel:c.channel,note:c.note,now:c.now,end:c.end,message:128,velocity:c.velocity});
e={}}})();if("undefined"===typeof DOMLoader)var DOMLoader={};if("undefined"===typeof XMLHttpRequest){var XMLHttpRequest;(function(){for(var a=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=0;b<a.length;b++){try{a[b]()}catch(c){continue}break}XMLHttpRequest=a[b]})()}
if("undefined"===typeof(new XMLHttpRequest).responseText){var IEBinaryToArray_ByteStr_Script="\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n\x3c/script>\r\n";document.write(IEBinaryToArray_ByteStr_Script);
DOMLoader.sendRequest=function(a){function b(a){for(var b={},c=0;256>c;c++)for(var g=0;256>g;g++)b[String.fromCharCode(c+256*g)]=String.fromCharCode(c)+String.fromCharCode(g);c=IEBinaryToArray_ByteStr(a);a=IEBinaryToArray_ByteStr_Last(a);return c.replace(/[\s\S]/g,function(a){return b[a]})+a}var c=XMLHttpRequest();c.open("GET",a.url,!0);a.responseType&&(c.responseType=a.responseType);a.onerror&&(c.onerror=a.onerror);a.onprogress&&(c.onprogress=a.onprogress);c.onreadystatechange=function(d){if(4===
c.readyState&&(200===c.status?c.responseText=b(c.responseBody):c=!1,a.onload))a.onload(c)};c.setRequestHeader("Accept-Charset","x-user-defined");c.send(null);return c}}else DOMLoader.sendRequest=function(a){var b=new XMLHttpRequest;b.open(a.data?"POST":"GET",a.url,!0);b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined");a.data&&b.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.responseType&&(b.responseType=a.responseType);a.onerror&&(b.onerror=a.onerror);
a.onprogress&&(b.onprogress=a.onprogress);b.onreadystatechange=function(c){if(4===b.readyState)if(200!==b.status&&304!=b.status){if(a.onerror)a.onerror(c,!1)}else if(a.onload)a.onload(b)};b.send(a.data);return b};"undefined"===typeof DOMLoader&&(DOMLoader={});
(function(){DOMLoader.script=function(){this.loaded={};this.loading={};return this};DOMLoader.script.prototype.add=function(a){var b=this;"string"===typeof a&&(a={src:a});var c=a.srcs;"undefined"===typeof c&&(c=[{src:a.src,verify:a.verify}]);var d=document.getElementsByTagName("head")[0],e=function(a,c){if(!b.loaded[a.src]&&!(c&&"undefined"===typeof window[c])){b.loaded[a.src]=!0;if(b.loading[a.src])b.loading[a.src]();delete b.loading[a.src];a.callback&&a.callback();"undefined"!==typeof l&&l()}},
f=[],g=function(c){"string"===typeof c&&(c={src:c,verify:a.verify});if(/([\w\d.])$/.test(c.verify))if(c.test=c.verify,"object"===typeof c.test)for(var g in c.test)f.push(c.test[g]);else f.push(c.test);b.loaded[c.src]||(g=document.createElement("script"),g.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||e(c)},g.onload=function(){e(c)},g.onerror=function(){},g.setAttribute("type","text/javascript"),g.setAttribute("src",c.src),d.appendChild(g),b.loading[c.src]=
function(){})},h=function(b){if(b)e(b,b.test);else for(var d=0;d<c.length;d++)e(c[d],c[d].test);for(var g=!0,d=0;d<f.length;d++){var m=f[d];if(m&&-1!==m.indexOf(".")){var m=m.split("."),n=window[m[0]];"undefined"!==typeof n&&(2===m.length?"undefined"===typeof n[m[1]]&&(g=!1):3===m.length&&"undefined"===typeof n[m[1]][m[2]]&&(g=!1))}else"undefined"===typeof window[m]&&(g=!1)}!a.strictOrder&&g?a.callback&&a.callback():setTimeout(function(){h(b)},10)};if(a.strictOrder){var k=-1,l=function(){k++;if(c[k]){var d=
c[k],e=d.src;b.loading[e]?b.loading[e]=function(){d.callback&&d.callback();l()}:b.loaded[e]?l():(g(d),h(d))}else a.callback&&a.callback()};l()}else{for(k=0;k<c.length;k++)g(c[k]);h()}};DOMLoader.script=new DOMLoader.script})();
(function(a,b,c){function d(){this.outputInUse=this.inputInUse=!1;var a=document.createElement("object");a.style.cssText="top: -500px; position: absolute;";a.id="_Jazz"+Math.random()+"ie";a.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90";this.activeX=a;var b=document.createElement("object");b.id="_Jazz"+Math.random;b.type="audio/x-jazz";a.appendChild(b);this.objRef=b;var c=document.createElement("p");c.appendChild(document.createTextNode("This page requires the "));var d=document.createElement("a");
d.appendChild(document.createTextNode("Jazz plugin"));d.href="http://jazz-soft.net/";c.appendChild(d);c.appendChild(document.createTextNode("."));b.appendChild(c);b=document.getElementById("MIDIPlugin");b||(b=document.body);b.appendChild(a);if(this._Jazz=this.objRef.isJazz?this.objRef:this.activeX.isJazz?this.activeX:null)this._Jazz._jazzTimeZero=this._Jazz.Time(),this._Jazz._perfTimeZero=window.performance.now()}function e(a,b){new g(a,b)}function f(a,b){console.warn?console.warn("getMIDIAccess has been renamed to requestMIDIAccess.  Please update your code."):
console.log("getMIDIAccess has been renamed to requestMIDIAccess.  Please update your code.");new g(a,b)}function g(a,b){this._jazzInstances=[];this._jazzInstances.push(new d);this._jazzInstances[0]._Jazz?(this._Jazz=this._jazzInstances[0]._Jazz,this._successCallback=a,window.setTimeout(h.bind(this),3)):b&&b({code:1})}function h(){this._successCallback&&this._successCallback(this)}function k(a,b,c,d){this._index=c;this._midi=a;this.type=d;this.name=b;this.manufacturer="<manufacturer unknown>";this.version=
"<version not supported>";this.fingerprint=""+c+"."+this.name}function l(a,b){this.onmessage=null;this._listeners=[];this._midiAccess=a;for(var c=null,e=0;e<a._jazzInstances.length&&!c;e++)a._jazzInstances[e].inputInUse||(c=a._jazzInstances[e]);c||(c=new d,a._jazzInstances.push(c));c.inputInUse=!0;this._jazzInstance=c._Jazz;b instanceof k?(this._deviceName=b.name,this._index=b._index):"number"===typeof b?(this._index=b,this._deviceName=this._jazzInstance.MidiInList()[b]):b.isString()&&(c=b.indexOf("."),
this._index=parseInt(b.slice(0,c)),this._deviceName=b.slice(c+1));this._input=this._jazzInstance.MidiInOpen(this._index,p.bind(this))}function p(a,b){var c=new CustomEvent("message");c.timestamp=parseFloat(a.toString())+this._jazzInstance._perfTimeZero;var d=0,e;for(e=0;e<b.length;e+=d){switch(b[e]&240){case 128:case 144:case 160:case 176:case 224:d=3;break;case 192:case 208:d=2;break;case 240:switch(b[e]){case 240:for(d=e+1;d<b.length&&247!=b[d];d++);d=d-e+1;break;case 241:case 243:d=2;break;case 242:d=
3;break;default:d=1}}c.data=new Uint8Array(b.slice(e,d+e));this.dispatchEvent(c)}}function q(a,b){this._midiAccess=a;for(var c=null,e=0;e<a._jazzInstances.length&&!c;e++)a._jazzInstances[e].outputInUse||(c=a._jazzInstances[e]);c||(c=new d,a._jazzInstances.push(c));c.outputInUse=!0;this._jazzInstance=c._Jazz;b instanceof k?(this._deviceName=b.name,this._index=b._index):"number"===typeof b?(this._index=b,this._deviceName=this._jazzInstance.MidiOutList()[b]):b.isString()&&(c=b.indexOf("."),this._index=
parseInt(b.slice(0,c)),this._deviceName=b.slice(c+1));this._jazzInstance.MidiOutOpen(this._deviceName)}function u(){this.jazz.MidiOutLong(this.data)}window.navigator.requestMIDIAccess||(window.navigator.requestMIDIAccess=e,window.navigator.getMIDIAccess||(window.navigator.getMIDIAccess=f));g.prototype.getInputs=function(){if(!this._Jazz)return null;for(var a=this._Jazz.MidiInList(),b=Array(a.length),c=0;c<a.length;c++)b[c]=new k(this,a[c],c,"input");return b};g.prototype.getOutputs=function(){if(!this._Jazz)return null;
for(var a=this._Jazz.MidiOutList(),b=Array(a.length),c=0;c<a.length;c++)b[c]=new k(this,a[c],c,"output");return b};g.prototype.enumerateInputs=function(){console.warn?console.warn("MIDIAccess.enumerateInputs has been renamed to MIDIAccess.getInputs.  Please update your code."):console.log("MIDIAccess.enumerateInputs has been renamed to MIDIAccess.getInputs.  Please update your code.");return this.getInputs()};g.prototype.enumerateOutputs=function(){console.warn?console.warn("MIDIAccess.enumerateOutputs has been renamed to MIDIAccess.getOutputs.  Please update your code."):
console.log("MIDIAccess.enumerateOutputs has been renamed to MIDIAccess.getOutputs.  Please update your code.");return this.getOutputs()};g.prototype.getInput=function(a){return null==a?null:new l(this,a)};g.prototype.getOutput=function(a){return null==a?null:new q(this,a)};k.prototype.toString=function(){return"type: "+this.type+"name: '"+this.name+"' manufacturer: '"+this.manufacturer+"' version: "+this.version+" fingerprint: '"+this.fingerprint+"'"};l.prototype.addEventListener=function(a,b,c){if("message"==
a){for(a=0;a<this._listeners.length;a++)if(this._listeners[a]==b)return;this._listeners.push(b)}};l.prototype.removeEventListener=function(a,b,c){if("message"==a)for(a=0;a<this._listeners.length;a++)if(this._listeners[a]==b){this._listeners.splice(a,1);break}};l.prototype.preventDefault=function(){this._pvtDef=!0};l.prototype.dispatchEvent=function(a){this._pvtDef=!1;for(var b=0;b<this._listeners.length;b++)this._listeners[b].handleEvent?this._listeners[b].handleEvent.bind(this)(a):this._listeners[b].bind(this)(a);
if(this.onmessage)this.onmessage(a);return this._pvtDef};q.prototype.send=function(a,b){var c=0;if(0==a.length)return!1;b&&(c=Math.floor(b-window.performance.now()));if(b&&1<c){var d={};d.jazz=this._jazzInstance;d.data=a;window.setTimeout(u.bind(d),c)}else this._jazzInstance.MidiOutLong(a);return!0}})(window);
(function(a){function b(){for(var b=["moz","webkit","opera","ms"],c=b.length,d={value:function(a){return function(){return Date.now()-a}}(Date.now())};0<=c;c--)if(b[c]+"Now"in a.performance)return d.value=function(b){return function(){a.performance[b]()}}(b[c]+"Now"),d;"timing"in a.performance&&"connectStart"in a.performance.timing&&(d.value=function(a){return function(){Date.now()-a}}(a.performance.timing.connectStart));return d}var c={},d;"performance"in a&&"now"in a.performance||("performance"in
a||Object.defineProperty(a,"performance",{get:function(){return c}}),d=b(),Object.defineProperty(a.performance,"now",d))})(window);
(function(a){a.btoa||(a.btoa=function(a){a=escape(a);var c="",d,e,f="",g,h,k="",l=0;do d=a.charCodeAt(l++),e=a.charCodeAt(l++),f=a.charCodeAt(l++),g=d>>2,d=(d&3)<<4|e>>4,h=(e&15)<<2|f>>6,k=f&63,isNaN(e)?h=k=64:isNaN(f)&&(k=64),c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k);
while(l<a.length);return c});a.atob||(a.atob=function(a){var c="",d,e,f="",g,h="",k=0;/[^A-Za-z0-9\+\/\=]/g.exec(a)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),
h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),d=d<<2|e>>4,e=(e&15)<<4|g>>2,f=(g&3)<<6|h,c+=String.fromCharCode(d),64!=g&&(c+=String.fromCharCode(e)),64!=h&&(c+=String.fromCharCode(f));while(k<a.length);return unescape(c)})})(this);
var Base64Binary={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(a){var b=Math.ceil(3*a.length/4),b=new ArrayBuffer(b);this.decode(a,b);return b},decode:function(a,b){var c=this._keyStr.indexOf(a.charAt(a.length-1)),d=this._keyStr.indexOf(a.charAt(a.length-1)),e=Math.ceil(3*a.length/4);64==c&&e--;64==d&&e--;var f,g,h,k,l=0,p=0,c=b?new Uint8Array(b):new Uint8Array(e);a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(l=0;l<e;l+=3)f=this._keyStr.indexOf(a.charAt(p++)),
g=this._keyStr.indexOf(a.charAt(p++)),d=this._keyStr.indexOf(a.charAt(p++)),k=this._keyStr.indexOf(a.charAt(p++)),f=f<<2|g>>4,g=(g&15)<<4|d>>2,h=(d&3)<<6|k,c[l]=f,64!=d&&(c[l+1]=g),64!=k&&(c[l+2]=h);return c}};dhtmlx=function(a){for(var b in a)dhtmlx[b]=a[b];return dhtmlx};
dhtmlx.extend_api=function(a,b,c){var d=window[a];d&&(window[a]=function(a){if(a&&"object"==typeof a&&!a.tagName){var c=d.apply(this,b._init?b._init(a):arguments),g;for(g in dhtmlx)if(b[g])this[b[g]](dhtmlx[g]);for(g in a)if(b[g])this[b[g]](a[g]);else 0==g.indexOf("on")&&this.attachEvent(g,a[g])}else c=d.apply(this,arguments);b._patch&&b._patch(this);return c||this},window[a].prototype=d.prototype,c&&dhtmlXHeir(window[a].prototype,c))};
dhtmlxAjax={get:function(a,b){var c=new dtmlXMLLoaderObject(!0);c.async=3>arguments.length;c.waitCall=b;c.loadXML(a);return c},post:function(a,b,c){var d=new dtmlXMLLoaderObject(!0);d.async=4>arguments.length;d.waitCall=c;d.loadXML(a,!0,b);return d},getSync:function(a){return this.get(a,null,!0)},postSync:function(a,b){return this.post(a,b,null,!0)}};
function dtmlXMLLoaderObject(a,b,c,d){this.xmlDoc="";this.async="undefined"!=typeof c?c:!0;this.onloadAction=a||null;this.mainObject=b||null;this.waitCall=null;this.rSeed=d||!1;return this}dtmlXMLLoaderObject.count=0;
dtmlXMLLoaderObject.prototype.waitLoadFunction=function(a){var b=!0;return this.check=function(){if(a&&null!=a.onloadAction&&(!a.xmlDoc.readyState||4==a.xmlDoc.readyState)&&b){b=!1;dtmlXMLLoaderObject.count++;if("function"==typeof a.onloadAction)a.onloadAction(a.mainObject,null,null,null,a);a.waitCall&&(a.waitCall.call(this,a),a.waitCall=null)}}};
dtmlXMLLoaderObject.prototype.getXMLTopNode=function(a,b){if(this.xmlDoc.responseXML){var c=this.xmlDoc.responseXML.getElementsByTagName(a);0==c.length&&-1!=a.indexOf(":")&&(c=this.xmlDoc.responseXML.getElementsByTagName(a.split(":")[1]));c=c[0]}else c=this.xmlDoc.documentElement;if(c)return this._retry=!1,c;if(!this._retry)return this._retry=!0,b=this.xmlDoc,this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(a,b);dhtmlxError.throwError("LoadXML","Incorrect XML",
[b||this.xmlDoc,this.mainObject]);return document.createElement("DIV")};dtmlXMLLoaderObject.prototype.loadXMLString=function(a,b){_isIE?(this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(a)):this.xmlDoc=(new DOMParser).parseFromString(a,"text/xml");if(!b){if(this.onloadAction)this.onloadAction(this.mainObject,null,null,null,this);this.waitCall&&(this.waitCall(),this.waitCall=null)}};
dtmlXMLLoaderObject.prototype.loadXML=function(a,b,c,d){this.rSeed&&(a+=(-1!=a.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf());this.filePath=a;this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this));this.xmlDoc.open(b?"POST":"GET",a,this.async);d?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type",
"text/xml")):b&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(c);this.async||(new this.waitLoadFunction(this))()};
dtmlXMLLoaderObject.prototype.destructor=function(){return this.setXSLParamValue=this.getXMLTopNode=this.xmlNodeToJSON=this.doSerialization=this.loadXMLString=this.loadXML=this.doXSLTransToString=this.doXSLTransToObject=this.doXPathOpera=this.doXPath=this.xmlDoc=this.mainObject=this.onloadAction=this.filePath=this.rSeed=this.async=this._retry=this._getAllNamedChilds=this._filterXPath=null};
dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(a){for(var b={},c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;b._tagvalue=a.firstChild?a.firstChild.nodeValue:"";for(c=0;c<a.childNodes.length;c++){var d=a.childNodes[c].tagName;d&&(b[d]||(b[d]=[]),b[d].push(this.xmlNodeToJSON(a.childNodes[c])))}return b};function callerFunction(a,b){return this.handler=function(c){c||(c=window.event);a(c,b);return!0}}function getAbsoluteLeft(a){return getOffset(a).left}
function getAbsoluteTop(a){return getOffset(a).top}function getOffsetSum(a){for(var b=0,c=0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}}
function getOffsetRect(a){a=a.getBoundingClientRect();var b=document.body,c=document.documentElement,d=a.left+(window.pageXOffset||c.scrollLeft||b.scrollLeft)-(c.clientLeft||b.clientLeft||0);return{top:Math.round(a.top+(window.pageYOffset||c.scrollTop||b.scrollTop)-(c.clientTop||b.clientTop||0)),left:Math.round(d)}}function getOffset(a){return a.getBoundingClientRect?getOffsetRect(a):getOffsetSum(a)}
function convertStringToBoolean(a){"string"==typeof a&&(a=a.toLowerCase());switch(a){case "1":case "true":case "yes":case "y":case 1:case !0:return!0;default:return!1}}function getUrlSymbol(a){return-1!=a.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop)return window.dhtmlDragAndDrop;this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0;this.tempDOMM=this.tempDOMU=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}
dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};
dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if(!((a||window.event)&&2==(a||event).button)){if(window.dhtmlDragAndDrop.waitDrag)return window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1;window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(a);window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=
document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=(new Date).valueOf();a&&a.preventDefault&&a.preventDefault();return!1}};
dhtmlDragAndDropObject.prototype.callDrag=function(a){a||(a=window.event);dragger=window.dhtmlDragAndDrop;if(!(100>(new Date).valueOf()-dragger.downtime)){if(!dragger.dragNode)if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,a);if(!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=
0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else return dragger.stopDrag(a,!0);if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var b=dragger.gldragNode;dragger.gldragNode.old&&(b=dragger.gldragNode.old);b.parentNode.removeChild(b);var c=dragger.dragNode.pWindow;b.pWindow&&b.pWindow.dhtmlDragAndDrop.lastLanding&&b.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(b.pWindow.dhtmlDragAndDrop.lastLanding);_isIE?(b=document.createElement("Div"),b.innerHTML=
dragger.dragNode.outerHTML,dragger.dragNode=b.childNodes[0]):dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);c.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=a.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=a.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||
document.documentElement.scrollTop)+"px";dragger.checkLanding(a.srcElement?a.srcElement:a.target,a)}};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(a){if(window.name){for(var b=parent.frames[window.name].frameElement.offsetParent,c=0,d=0;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;parent.dhtmlDragAndDrop&&(b=parent.dhtmlDragAndDrop.calculateFramePosition(1),c+=1*b.split("_")[0],d+=1*b.split("_")[1]);if(a)return c+"_"+d;this.fx=c;this.fy=d}return"0_0"};
dhtmlDragAndDropObject.prototype.checkLanding=function(a,b){a&&a.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=a,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,b.clientX,b.clientY,b),this.lastLanding_scr=_isIE?b.srcElement:b.target):a&&"BODY"!=a.tagName?this.checkLanding(a.parentNode,b):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,b.clientX,b.clientY,b),this.lastLanding=
0,this._onNotFound&&this._onNotFound())};
dhtmlDragAndDropObject.prototype.stopDrag=function(a,b){dragger=window.dhtmlDragAndDrop;if(!b){dragger.stopFrameRoute();var c=dragger.lastLanding;dragger.lastLanding=null;c&&c.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,c,_isIE?event.srcElement:a.target)}dragger.lastLanding=null;dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=
0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(a){a&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var b=0;b<window.frames.length;b++)try{window.frames[b]!=a&&window.frames[b].dhtmlDragAndDrop&&window.frames[b].dhtmlDragAndDrop.stopFrameRoute(window)}catch(c){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(d){}};
dhtmlDragAndDropObject.prototype.initFrameRoute=function(a,b){a&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=a.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=a.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=a.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=a.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&b&&(!_isFF||1.8>_FFrv)&&window.dhtmlDragAndDrop.calculateFramePosition());
try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(c){}for(var d=0;d<window.frames.length;d++)try{window.frames[d]!=a&&window.frames[d].dhtmlDragAndDrop&&window.frames[d].dhtmlDragAndDrop.initFrameRoute(window,!a||b?1:0)}catch(e){}};_OperaRv=_KHTMLrv=_FFrv=_isChrome=_isMacOS=_isKHTML=_isOpera=_isIE=_isFF=!1;-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0);-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&(_isChrome=!0);
if(-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror"))_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),525<_KHTMLrv?(_isFF=!0,_FFrv=1.9):_isKHTML=!0;else if(-1!=navigator.userAgent.indexOf("Opera"))_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3));else if(-1!=navigator.appName.indexOf("Microsoft")){if(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||
-1!=navigator.appVersion.indexOf("MSIE 10.0"))&&"BackCompat"!=document.compatMode)_isIE=8}else _isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1]);
dtmlXMLLoaderObject.prototype.doXPath=function(a,b,c,d){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(a,b);if(_isIE)return b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),null!=c&&b.setProperty("SelectionNamespaces","xmlns:xsl='"+c+"'"),"single"==d?b.selectSingleNode(a):b.selectNodes(a)||[];var e=b;b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML);b||dhtmlxError.throwError("LoadXML",
"Incorrect XML",[b||this.xmlDoc,this.mainObject]);-1!=b.nodeName.indexOf("document")?e=b:(e=b,b=b.ownerDocument);var f=XPathResult.ANY_TYPE;"single"==d&&(f=XPathResult.FIRST_ORDERED_NODE_TYPE);d=[];a=b.evaluate(a,e,function(){return c},f,null);if(f==XPathResult.FIRST_ORDERED_NODE_TYPE)return a.singleNodeValue;for(f=a.iterateNext();f;)d[d.length]=f,f=a.iterateNext();return d};function j(){this.catches||(this.catches=[]);return this}j.prototype.catchError=function(a,b){this.catches[a]=b};
j.prototype.throwError=function(a,b,c){if(this.catches[a])return this.catches[a](a,b,c);if(this.catches.ALL)return this.catches.ALL(a,b,c);alert("Error type: "+a+"\nDescription: "+b);return null};window.dhtmlxError=new j;
dtmlXMLLoaderObject.prototype.doXPathOpera=function(a,b){var c=a.replace(/[\/]+/gi,"/").split("/"),d=null,e=1;if(!c.length)return[];if("."==c[0])d=[b];else if(""==c[0])d=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(c[e].replace(/\[[^\]]*\]/g,"")),e++;else return[];for(;e<c.length;e++)d=this._getAllNamedChilds(d,c[e]);-1!=c[e-1].indexOf("[")&&(d=this._filterXPath(d,c[e-1]));return d};
dtmlXMLLoaderObject.prototype._filterXPath=function(a,b){var c=[];b=b.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,"");for(var d=0;d<a.length;d++)a[d].getAttribute(b)&&(c[c.length]=a[d]);return c};
dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(a,b){var c=[];_isKHTML&&(b=b.toUpperCase());for(var d=0;d<a.length;d++)for(var e=0;e<a[d].childNodes.length;e++)_isKHTML?a[d].childNodes[e].tagName&&a[d].childNodes[e].tagName.toUpperCase()==b&&(c[c.length]=a[d].childNodes[e]):a[d].childNodes[e].tagName==b&&(c[c.length]=a[d].childNodes[e]);return c};function dhtmlXHeir(a,b){for(var c in b)"function"==typeof b[c]&&(a[c]=b[c]);return a}
function dhtmlxEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}dtmlXMLLoaderObject.prototype.xslDoc=null;dtmlXMLLoaderObject.prototype.setXSLParamValue=function(a,b,c){c||(c=this.xslDoc);c.responseXML&&(c=c.responseXML);a=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+a+"']",c,"http://www.w3.org/1999/XSL/Transform","single");null!=a&&(a.firstChild.nodeValue=b)};
dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(a,b){a||(a=this.xslDoc);a.responseXML&&(a=a.responseXML);b||(b=this.xmlDoc);b.responseXML&&(b=b.responseXML);if(_isIE){d=new ActiveXObject("Msxml2.DOMDocument.3.0");try{b.transformNodeToObject(a,d)}catch(c){d=b.transformNode(a)}}else{this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(a));var d=this.XSLProcessor.transformToDocument(b)}return d};
dtmlXMLLoaderObject.prototype.doXSLTransToString=function(a,b){var c=this.doXSLTransToObject(a,b);return"string"==typeof c?c:this.doSerialization(c)};dtmlXMLLoaderObject.prototype.doSerialization=function(a){a||(a=this.xmlDoc);a.responseXML&&(a=a.responseXML);return _isIE?a.xml:(new XMLSerializer).serializeToString(a)};
dhtmlxEventable=function(a){a.attachEvent=function(a,c,d){a="ev_"+a.toLowerCase();this[a]||(this[a]=new this.eventCatcher(d||this));return a+":"+this[a].addEvent(c)};a.callEvent=function(a,c){a="ev_"+a.toLowerCase();return this[a]?this[a].apply(this,c):!0};a.checkEvent=function(a){return!!this["ev_"+a.toLowerCase()]};a.eventCatcher=function(a){var c=[],d=function(){for(var d=!0,f=0;f<c.length;f++)if(null!=c[f])var g=c[f].apply(a,arguments),d=d&&g;return d};d.addEvent=function(a){"function"!=typeof a&&
(a=eval(a));return a?c.push(a)-1:!1};d.removeEvent=function(a){c[a]=null};return d};a.detachEvent=function(a){!1!=a&&(a=a.split(":"),this[a[0]].removeEvent(a[1]))};a.detachAllEvents=function(){for(var a in this)0==a.indexOf("ev_")&&delete this[a]};a=null};
function dhtmlxSlider(a,b,c,d,e,f,g,h){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(k){}a&&("object"==typeof a&&!a.nodeName)&&(c=a.skin,e=a.min,f=a.max,h=a.step,d=a.vertical,g=a.value,b=a.size);if(a)a="object"!=typeof a?document.getElementById(a):a;else{var l="slider_div_"+(new Date).valueOf()+Math.random(1E3);a=document.createElement("div");a.setAttribute("id",l);for(l=document.body.lastChild;l.lastChild&&1==l.lastChild.nodeType;)l=l.lastChild;l.parentNode.insertBefore(a,
l)}"object"==typeof b&&(c=b.skin,e=b.min,f=b.max,h=b.step,d=b.vertical,g=b.value,b=b.size);this.size=b;this.vMode=d||!1;this.skin=dhtmlx.skin||c||"default";this.parent=a;this.disabled=this.isInit=!1;this.value="undefined"==g?e||0:g;this.inputPriority=!0;this.stepping=!1;this.imgURL=window.dhx_globalImgPath||dhtmlx.image_path||"";this._skinsImgs={"default":{ls:1,lz:1,rz:1,rs:1},ball:{ls:1,lz:1,rz:1,rs:1},zipper:{bg:1,lz:1,rz:1},arrow:{bg:1,ls:1,rs:1},arrowgreen:{bg:1,ls:1,rs:1},simplesilver:{lz:1,
ls:1,rs:1,rz:1},simplegray:{lz:1,ls:1,rs:1,rz:1},bar:{bg:1,ls:1,rs:1},dhx_skyblue:{bg:1}};this._def=[e-0||0,f-0||100,h-0||1,g-0||0,b-0];dhtmlxEventable(this);return this}
dhtmlxSlider.prototype.createStructure=function(){this.con&&(this.con.parentNode.removeChild(this.con),this.con=null);if(this.vMode){this._sW="height";this._sH="width";this._sL="top";this._sT="left";var a=this.imgURL+"skins/"+this.skin+"/vertical/"}else this._sW="width",this._sH="height",this._sL="left",this._sT="top",a=this.imgURL+"skins/"+this.skin+"/";this.con=document.createElement("DIV");this.con.onselectstart=function(){return!1};this.con._etype="slider";this.con.className="dhtmlxSlider"+("default"!=
this.skin?"_"+this.skin:"");this._skinsImgs[this.skin].bg&&(this.con.style.backgroundImage="url("+a+"bg.gif)");this.drag=document.createElement("DIV");this.drag._etype="drag";this.drag.className="selector";this.drag.style.backgroundImage="url("+a+"selector.gif)";var b=document.createElement("DIV");b.className="leftSide";this._skinsImgs[this.skin].ls&&(b.style.background="url("+a+"leftside_bg.gif)");this.leftZone=document.createElement("DIV");this.leftZone.className="leftZone";this._skinsImgs[this.skin].lz&&
(this.leftZone.style.background="url("+a+"leftzone_bg.gif)");var c=document.createElement("DIV");c.className="rightSide";this._skinsImgs[this.skin].rs&&(c.style.background="url("+a+"rightside_bg.gif)");this.rightZone=document.createElement("DIV");this.rightZone.className="rightZone";this._skinsImgs[this.skin].rz&&(this.rightZone.style.background="url("+a+"rightzone_bg.gif)");this.con.appendChild(b);this.con.appendChild(this.leftZone);this.con.appendChild(this.rightZone);this.con.appendChild(c);this.con.appendChild(this.drag);
this.parent.appendChild(this.con);(!this.parent.parentNode||!this.parent.parentNode.tagName)&&document.body.appendChild(this.parent);if(this.vMode){this._sW="height";this._sH="width";this._sL="top";this._sT="left";this.con.style.width=this.con.offsetHeight+"px";for(a=0;a<this.con.childNodes.length;a++)this.con.childNodes[a].style.fontSize="0",b=this.con.childNodes[a].offsetWidth,this.con.childNodes[a].style.width=this.con.childNodes[a].offsetHeight+"px",this.con.childNodes[a].style.height=b+"px",
b=this.con.childNodes[a].offsetLeft,this.con.childNodes[a].style.left=this.con.childNodes[a].offsetTop+"px",this.con.childNodes[a].style.top=b+"px";c.style.top=this.size-c.offsetHeight+"px";this.zoneSize=this.size-c.offsetHeight;this.dragLeft=this.drag.offsetTop;this.dragWidth=this.drag.offsetHeight;this.rightZone.style.height=this.zoneSize+"px"}else this.zoneSize=this.size-c.offsetWidth,this.dragLeft=this.drag.offsetLeft,this.dragWidth=this.drag.offsetWidth,this.rightZone.style.width=this.zoneSize+
"px";this.con.style[this._sW]=this.size+"px";this.con.onmousedown=this._onMouseDown;this.con.onmouseup=this.con.onmouseout=function(){clearInterval(this.that._int)};this.con.that=this;this._aCalc(this._def)};
dhtmlxSlider.prototype._aCalc=function(a){if(this.isInit)return this.shift=a[0],this.limit=a[1]-this.shift,this._mod=(a[4]-2*this.dragLeft-this.dragWidth)/this.limit,this._step=a[2],this.step=this._step*this._mod,this._xlimit=a[4]-2*this.dragLeft-this.dragWidth,this.posX||(this.posX=this._xlimit*(a[3]-this.shift)/this.limit),this._applyPos(!0),this};dhtmlxSlider.prototype.setMin=function(a){this._def[0]=a-0;this._aCalc(this._def)};dhtmlxSlider.prototype.setMax=function(a){this._def[1]=a-0;this._aCalc(this._def)};
dhtmlxSlider.prototype.setStep=function(a){this._def[2]=a-0;this._aCalc(this._def)};
dhtmlxSlider.prototype._applyPos=function(a){if(this.isInit){1!=this.step&&this.step&&(this.posX=Math.round(this.posX/this.step)*this.step);0>this.posX&&(this.posX=0);if(this.value<(this._def[0]||0))this.value=this._def[0]||0;this.value>this._def[1]&&(this.value=this._def[1]);this.posX>this._xlimit&&(this.posX=this._xlimit);var b=this.drag.style[this._sL];this.drag.style[this._sL]=this.posX+1*this.dragLeft+"px";this.leftZone.style[this._sW]=this.posX+1*this.dragLeft+"px";this.rightZone.style[this._sL]=
this.posX+1*this.dragLeft+1+"px";this.rightZone.style[this._sW]=this.zoneSize-(this.posX+1*this.dragLeft)+"px";var c=this.getValue();this._link&&(this._linkBoth?this._link.value=c:this._link.innerHTML=c);!a&&b!=this.drag.style[this._sL]&&this.callEvent("onChange",[c,this]);this.value=this.getValue();this._dttp||this._setTooltip(c)}};dhtmlxSlider.prototype._setTooltip=function(a){this.con.title=a};dhtmlxSlider.prototype.setSkin=function(a){this.skin=a||"default";this.isInit&&this.createStructure()};
dhtmlxSlider.prototype.startDrag=function(a){if(!this._busy&&(0===a.button||1===a.button)){this.drag_mx=a.clientX;this.drag_my=a.clientY;this.drag_cx=this.posX;this.d_b_move=document.body.onmousemove;this.d_b_up=document.body.onmouseup;var b=this;document.body.onmouseup=function(a){b.stopDrag(a||event);b=null};document.body.onmousemove=function(a){b.onDrag(a||event)};this._busy=!0}};
dhtmlxSlider.prototype.onDrag=function(a){this._busy&&(this.posX=this.vMode?this.drag_cx+a.clientY-this.drag_my:this.drag_cx+a.clientX-this.drag_mx,this._applyPos())};dhtmlxSlider.prototype.stopDrag=function(){document.body.onmousemove=this.d_b_move?this.d_b_move:null;document.body.onmouseup=this.d_b_up?this.d_b_up:null;this.d_b_move=this.d_b_up=null;this._busy=!1;this.callEvent("onSlideEnd",[this.getValue()])};
dhtmlxSlider.prototype.getValue=function(){return!this._busy&&this.inputPriority?(Math.round(this.value/this._step)*this._step).toFixed(6)-0:Math.round(1E4*(Math.round(this.posX/this._mod/this._step)*this._step+1*this.shift))/1E4};dhtmlxSlider.prototype.setValue=function(a,b){isNaN(a)||(this._def[3]=this.value=a-0,this.posX=Math.round(((a||0)-this.shift)*this._mod),this._applyPos(null==b?!0:b))};
dhtmlxSlider.prototype._getActionElement=function(a){return a._etype?a:a.parentNode?this._getActionElement(a.parentNode):null};
dhtmlxSlider.prototype._onMouseDown=function(a){if(!this.that.disabled){a=a||event;var b=this.that;switch(b._getActionElement(_isIE?a.srcElement:a.target)._etype){case "slider":a=b.vMode?a.clientY-(getAbsoluteTop(b.con)-document.body.scrollTop):a.clientX-(getAbsoluteLeft(b.con)-document.body.scrollLeft);var c=b.posX;b.posX=a-b.dragLeft-b.dragWidth/2;b.direction=b.posX>c?1:-1;b.stepping?(clearInterval(b._int),b.setValue(b.value+b._step*b.direction,!1),b._int=setInterval(function(){b.setValue(b.value+
b._step*b.direction,!1)},600)):(b._busy=!0,b._applyPos(),b._busy=!1);break;case "drag":b.startDrag(a||event)}return!1}};dhtmlxSlider.prototype.setOnChangeHandler=function(a){this.attachEvent("onChange",a)};dhtmlxSlider.prototype._linkFrom=function(){this.disabled||this.setValue(parseFloat(this._link.value),!1)};
dhtmlxSlider.prototype.linkTo=function(a){this._link=a="object"!=typeof a?document.getElementById(a):a;var b=a.tagName.toString().toLowerCase();if(this._linkBoth="input"==b||"select"==b||"textarea"==b?1:0){var c=this;a.onblur=a.onkeypress=a.onchange=function(){this._nextSlider&&window.clearTimeout(this._nextSlider);this._nextSlider=window.setTimeout(function(){c._linkFrom()},500)}}this._applyPos()};
dhtmlxSlider.prototype.enableTooltip=function(a){this._dttp=!convertStringToBoolean(a);this._setTooltip(this._dttp?"":this.getValue())};dhtmlxSlider.prototype.setImagePath=function(a){this.imgURL=a};dhtmlxSlider.prototype.init=function(){this.isInit=!0;this.createStructure()};dhtmlxSlider.prototype.setInputPriority=function(a){this.inputPriority=a};dhtmlxSlider.prototype.setSteppingMode=function(a){this.stepping=a};dhtmlxSlider.prototype.disable=function(a){this.disabled=a};
(function(){dhtmlx.extend_api("dhtmlxSlider",{_init:function(a){return[a.parent,a.size,a.skin,a.vertical,a.min,a.max,a.value,a.step]},link:"linkTo"},{})})();
